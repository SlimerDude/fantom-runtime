<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>fluxText::Doc</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>fluxText</a></li>
  <li>&gt;</li>
  <li><a href='Doc.html'>Doc</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='type'>
<div class='overview'>
<h2>class</h2>
<h1>fluxText::Doc</h1>
<pre><a href='../sys/Obj.html'>sys::Obj</a>
  <a href='../fwt/RichTextModel.html'>fwt::RichTextModel</a>
    fluxText::Doc</pre>
</div>
<div class='detail'>

<p>Doc is the model for text edited in a <code><a href='TextEditor.html'>TextEditor</a></code></p>
</div>
</div>
<div class='slots'>
<div class='detail'>
<h2>Slots</h2>
<dl>
<dt id='bracketCol1' class='field hidden'>bracketCol1<a href='Doc_src.html#bracketCol1'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Int.html'>Int</a>? bracketCol1</code></p>
</dd>
<dt id='bracketCol2' class='field hidden'>bracketCol2<a href='Doc_src.html#bracketCol2'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Int.html'>Int</a>? bracketCol2</code></p>
</dd>
<dt id='bracketLine1' class='field hidden'>bracketLine1<a href='Doc_src.html#bracketLine1'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Int.html'>Int</a>? bracketLine1</code></p>
</dd>
<dt id='bracketLine2' class='field hidden'>bracketLine2<a href='Doc_src.html#bracketLine2'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Int.html'>Int</a>? bracketLine2</code></p>
</dd>
<dt id='bracketPairs' class='field hidden'>bracketPairs<a href='Doc_src.html#bracketPairs'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>const static internal <a href='../sys/Int.html'>Int</a>:<a href='../sys/Int.html'>Int</a> bracketPairs</code></p>
</dd>
<dt id='caretLine' class='field hidden'>caretLine<a href='Doc_src.html#caretLine'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Int.html'>Int</a> caretLine</code></p>
</dd>
<dt id='charCount' class='method'>charCount<a href='Doc_src.html#charCount'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='../sys/Int.html'>Int</a> charCount()</code></p>
<div class='slotInfo'>
<p>Overrides <a href='../fwt/RichTextModel.html#charCount'>fwt::RichTextModel.charCount</a></p>
<p>Doc inherited from <a href='../fwt/RichTextModel.html#charCount'>fwt::RichTextModel.charCount</a></p>
</div>

<p>Return the number of characters in the content.</p>
</dd>
<dt id='delimiter' class='field hidden'>delimiter<a href='Doc_src.html#delimiter'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Str.html'>Str</a> delimiter</code></p>
</dd>
<dt id='dump' class='method'>dump<a href='Doc_src.html#dump'>Source</a></dt>
<dd>
<p><code class='sig'><a href='../sys/Void.html'>Void</a> dump(<a href='../sys/OutStream.html'>OutStream</a> out := Env.cur().out())</code></p>

<p>Debug dump of the document model.</p>
</dd>
<dt id='findNext' class='method'>findNext<a href='Doc_src.html#findNext'>Source</a></dt>
<dd>
<p><code class='sig'><a href='../sys/Int.html'>Int</a>? findNext(<a href='../sys/Str.html'>Str</a> s, <a href='../sys/Int.html'>Int</a> offset, <a href='../sys/Bool.html'>Bool</a> matchCase)</code></p>

<p>Find the specified string in the document starting the search at the document offset and looking forward. Return null is not found.  Note we don't currently support searching across multiple lines.</p>
</dd>
<dt id='findPrev' class='method'>findPrev<a href='Doc_src.html#findPrev'>Source</a></dt>
<dd>
<p><code class='sig'><a href='../sys/Int.html'>Int</a>? findPrev(<a href='../sys/Str.html'>Str</a> s, <a href='../sys/Int.html'>Int</a> offset, <a href='../sys/Bool.html'>Bool</a> matchCase)</code></p>

<p>Find the specified string in the document starting the search at the document offset and looking backward. Return null is not found.  Note we don't currently support searching across multiple lines.</p>
</dd>
<dt id='insertBracketMatch' class='method hidden'>insertBracketMatch<a href='Doc_src.html#insertBracketMatch'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>private <a href='../sys/Void.html'>Void</a> insertBracketMatch(<a href='../sys/Obj.html'>Obj</a>[] styling, <a href='../sys/Int.html'>Int</a> offset, <a href='../sys/Int.html'>Int</a> lineLen)</code></p>

<p>Insert a bracket match style run of one character at the specified offset.  There are four cases where "xxx" is run, and "^" is insertion point:</p>

<pre>x      a) replace single char run</pre>

<pre>xxx      b) insert at end
  xxx    c) move run to right one char, insert
xxxxx    d) breaking middle of run
  ^</pre>
</dd>
<dt id='line' class='method'>line<a href='Doc_src.html#line'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='../sys/Str.html'>Str</a> line(<a href='../sys/Int.html'>Int</a> lineIndex)</code></p>
<div class='slotInfo'>
<p>Overrides <a href='../fwt/RichTextModel.html#line'>fwt::RichTextModel.line</a></p>
<p>Doc inherited from <a href='../fwt/RichTextModel.html#line'>fwt::RichTextModel.line</a></p>
</div>

<p>Return the line at the given zero based line index without delimiters.</p>
</dd>
<dt id='lineAtOffset' class='method'>lineAtOffset<a href='Doc_src.html#lineAtOffset'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='../sys/Int.html'>Int</a> lineAtOffset(<a href='../sys/Int.html'>Int</a> offset)</code></p>
<div class='slotInfo'>
<p>Overrides <a href='../fwt/RichTextModel.html#lineAtOffset'>fwt::RichTextModel.lineAtOffset</a></p>
<p>Doc inherited from <a href='../fwt/RichTextModel.html#lineAtOffset'>fwt::RichTextModel.lineAtOffset</a></p>
</div>

<p>Return the zero based line index at the given character offset.</p>
</dd>
<dt id='lineBackground' class='method'>lineBackground<a href='Doc_src.html#lineBackground'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='../gfx/Color.html'>Color</a>? lineBackground(<a href='../sys/Int.html'>Int</a> lineIndex)</code></p>
<div class='slotInfo'>
<p>Overrides <a href='../fwt/RichTextModel.html#lineBackground'>fwt::RichTextModel.lineBackground</a></p>
<p>Doc inherited from <a href='../fwt/RichTextModel.html#lineBackground'>fwt::RichTextModel.lineBackground</a></p>
</div>

<p>Return the color to use for the specified line's background. Normal lineStyling backgrounds only cover the width of the text. However, the lineBackground covers the width of the entire edit area.  Return null for no special background.</p>
</dd>
<dt id='lineCount' class='method'>lineCount<a href='Doc_src.html#lineCount'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='../sys/Int.html'>Int</a> lineCount()</code></p>
<div class='slotInfo'>
<p>Overrides <a href='../fwt/RichTextModel.html#lineCount'>fwt::RichTextModel.lineCount</a></p>
<p>Doc inherited from <a href='../fwt/RichTextModel.html#lineCount'>fwt::RichTextModel.lineCount</a></p>
</div>

<p>Return the number of lines.</p>
</dd>
<dt id='lineStyling' class='method'>lineStyling<a href='Doc_src.html#lineStyling'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='../sys/Obj.html'>Obj</a>[]? lineStyling(<a href='../sys/Int.html'>Int</a> lineIndex)</code></p>
<div class='slotInfo'>
<p>Overrides <a href='../fwt/RichTextModel.html#lineStyling'>fwt::RichTextModel.lineStyling</a></p>
<p>Doc inherited from <a href='../fwt/RichTextModel.html#lineStyling'>fwt::RichTextModel.lineStyling</a></p>
</div>

<p>Return the styled segments for the given zero based line index. The result is a list of Int/RichTextStyle pairs where the Int specifies a zero based char offset of the line using a pattern such as:</p>

<pre>[Int, RichTextStyle, Int, RichTextStyle, ...]</pre>
</dd>
<dt id='lines' class='field hidden'>lines<a href='Doc_src.html#lines'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='Line.html'>Line</a>[] lines := Line[,]</code></p>
</dd>
<dt id='load' class='method hidden'>load<a href='Doc_src.html#load'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Void.html'>Void</a> load(<a href='../sys/Str.html'>Str</a>[] strLines)</code></p>

<p>Load fresh document already parsed into lines.</p>
</dd>
<dt id='make' class='method'>make<a href='Doc_src.html#make'>Source</a></dt>
<dd>
<p><code class='sig'>new make(<a href='TextEditorOptions.html'>TextEditorOptions</a> options, <a href='SyntaxOptions.html'>SyntaxOptions</a> syntax, <a href='SyntaxRules.html'>SyntaxRules</a> rules)</code></p>
</dd>
<dt id='matchBracket' class='method hidden'>matchBracket<a href='Doc_src.html#matchBracket'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Int.html'>Int</a>? matchBracket(<a href='../sys/Int.html'>Int</a> offset)</code></p>

<p>Attempt to find the matching bracket the specified offset.  If the bracket is an opening bracket then we search forward for the closing bracket taking into account nesting.  If a closing bracket we search backward. Return null if no match.</p>
</dd>
<dt id='modify' class='method'>modify<a href='Doc_src.html#modify'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='../sys/Void.html'>Void</a> modify(<a href='../sys/Int.html'>Int</a> startOffset, <a href='../sys/Int.html'>Int</a> len, <a href='../sys/Str.html'>Str</a> newText)</code></p>
<div class='slotInfo'>
<p>Overrides <a href='../fwt/RichTextModel.html#modify'>fwt::RichTextModel.modify</a></p>
<p>Doc inherited from <a href='../fwt/RichTextModel.html#modify'>fwt::RichTextModel.modify</a></p>
</div>

<p>Replace the text with <code>newText</code> starting at position <code>start</code> for a length of <code>replaceLen</code>.  The model implementation must fire the <a href='../fwt/RichTextModel.html#onModify'>onModify</a> event.</p>
</dd>
<dt id='offsetAtLine' class='method'>offsetAtLine<a href='Doc_src.html#offsetAtLine'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='../sys/Int.html'>Int</a> offsetAtLine(<a href='../sys/Int.html'>Int</a> lineIndex)</code></p>
<div class='slotInfo'>
<p>Overrides <a href='../fwt/RichTextModel.html#offsetAtLine'>fwt::RichTextModel.offsetAtLine</a></p>
<p>Doc inherited from <a href='../fwt/RichTextModel.html#offsetAtLine'>fwt::RichTextModel.offsetAtLine</a></p>
</div>

<p>Return the character offset of the first character of the given zero based line index.</p>
</dd>
<dt id='options' class='field'>options<a href='Doc_src.html#options'>Source</a></dt>
<dd>
<p><code class='sig'>readonly <a href='TextEditorOptions.html'>TextEditorOptions</a> options</code></p>
</dd>
<dt id='parser' class='field hidden'>parser<a href='Doc_src.html#parser'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='Parser.html'>Parser</a> parser</code></p>
</dd>
<dt id='rules' class='field'>rules<a href='Doc_src.html#rules'>Source</a></dt>
<dd>
<p><code class='sig'>readonly <a href='SyntaxRules.html'>SyntaxRules</a> rules</code></p>
</dd>
<dt id='save' class='method hidden'>save<a href='Doc_src.html#save'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Void.html'>Void</a> save(<a href='../sys/OutStream.html'>OutStream</a> out)</code></p>

<p>Save document to output stream (we assume charset is already configured).</p>
</dd>
<dt id='setBracketMatch' class='method hidden'>setBracketMatch<a href='Doc_src.html#setBracketMatch'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Void.html'>Void</a> setBracketMatch(<a href='../sys/Int.html'>Int</a> line1, <a href='../sys/Int.html'>Int</a> col1, <a href='../sys/Int.html'>Int</a> line2, <a href='../sys/Int.html'>Int</a> col2)</code></p>

<p>Set the two current matching bracket positions. These will get styled specially.  It is up to the caller to repaint the dirty lines.</p>
</dd>
<dt id='size' class='field hidden'>size<a href='Doc_src.html#size'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Int.html'>Int</a> size := 0</code></p>
</dd>
<dt id='syntax' class='field'>syntax<a href='Doc_src.html#syntax'>Source</a></dt>
<dd>
<p><code class='sig'>readonly <a href='SyntaxOptions.html'>SyntaxOptions</a> syntax</code></p>
</dd>
<dt id='text' class='field'>text<a href='Doc_src.html#text'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='../sys/Str.html'>Str</a> text</code></p>
<div class='slotInfo'>
<p>Overrides <a href='../fwt/RichTextModel.html#text'>fwt::RichTextModel.text</a></p>
<p>Doc inherited from <a href='../fwt/RichTextModel.html#text'>fwt::RichTextModel.text</a></p>
</div>

<p>Get or set the entire text document.</p>
</dd>
<dt id='updateLines' class='method hidden'>updateLines<a href='Doc_src.html#updateLines'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>private <a href='../sys/Void.html'>Void</a> updateLines(<a href='Line.html'>Line</a>[] lines)</code></p>

<p>Walk all the lines:</p>

<ul>
<li>update offset</li>

<li>update total size</li>

<li>compute style override for block comments</li>

<li>compute style override for multiline strings</li>
</ul>
</dd>
<dt id='updateMarks' class='method hidden'>updateMarks<a href='Doc_src.html#updateMarks'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Void.html'>Void</a> updateMarks(<a href='../flux/Mark.html'>Mark</a>[] marks)</code></p>

<p>Highlight all the marks found in this document.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class='sidebar'>
<h2>Type</h2>
<ul class='clean'>
  <li><a href='Doc_src.html'>View Source</a></li>
  <li><a href='#' onclick='ShowSlots.toggle(event); return false;'>Show All Slots</a></li>
</ul>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li class='hidden'><a href='#bracketCol1'>bracketCol1</a></li>
  <li class='hidden'><a href='#bracketCol2'>bracketCol2</a></li>
  <li class='hidden'><a href='#bracketLine1'>bracketLine1</a></li>
  <li class='hidden'><a href='#bracketLine2'>bracketLine2</a></li>
  <li class='hidden'><a href='#bracketPairs'>bracketPairs</a></li>
  <li class='hidden'><a href='#caretLine'>caretLine</a></li>
  <li><a href='#charCount'>charCount</a></li>
  <li class='hidden'><a href='#delimiter'>delimiter</a></li>
  <li><a href='#dump'>dump</a></li>
  <li><a href='#findNext'>findNext</a></li>
  <li><a href='#findPrev'>findPrev</a></li>
  <li class='hidden'><a href='#insertBracketMatch'>insertBracketMatch</a></li>
  <li><a href='#line'>line</a></li>
  <li><a href='#lineAtOffset'>lineAtOffset</a></li>
  <li><a href='#lineBackground'>lineBackground</a></li>
  <li><a href='#lineCount'>lineCount</a></li>
  <li><a href='#lineStyling'>lineStyling</a></li>
  <li class='hidden'><a href='#lines'>lines</a></li>
  <li class='hidden'><a href='#load'>load</a></li>
  <li><a href='#make'>make</a></li>
  <li class='hidden'><a href='#matchBracket'>matchBracket</a></li>
  <li><a href='#modify'>modify</a></li>
  <li><a href='#offsetAtLine'>offsetAtLine</a></li>
  <li><a href='#options'>options</a></li>
  <li class='hidden'><a href='#parser'>parser</a></li>
  <li><a href='#rules'>rules</a></li>
  <li class='hidden'><a href='#save'>save</a></li>
  <li class='hidden'><a href='#setBracketMatch'>setBracketMatch</a></li>
  <li class='hidden'><a href='#size'>size</a></li>
  <li><a href='#syntax'>syntax</a></li>
  <li><a href='#text'>text</a></li>
  <li class='hidden'><a href='#updateLines'>updateLines</a></li>
  <li class='hidden'><a href='#updateMarks'>updateMarks</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
fluxText 1.0.56
[11-Nov-2010 Thu 10:08:27AM EST]
</p>
</div>
</div>
</body>
</html>
