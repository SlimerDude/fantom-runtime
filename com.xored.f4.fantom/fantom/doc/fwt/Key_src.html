<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>fwt::Key</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>fwt</a></li>
  <li>&gt;</li>
  <li><a href='Key.html'>Key</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='type'>
<div class='overview'>
<h2>const class</h2>
<h1>fwt::Key</h1>
<pre><a href='../sys/Obj.html'>sys::Obj</a>
  fwt::Key</pre>
</div>
</div>
<div class='src'>
<pre>
<span class='y'>//</span>
<span class='y'>// Copyright (c) 2008, Brian Frank and Andy Frank</span>
<span class='y'>// Licensed under the Academic Free License version 3.0</span>
<span class='y'>//</span>
<span class='y'>// History:</span>
<span class='y'>//   18 Aug 08  Brian Frank  Creation</span>
<span class='y'>//</span>

<span class='z'>**</span>
<span class='z'>** Key models a keyboard key or key combination.</span>
<span class='z'>**</span>
@Js
@Serializable <span class='b'>{</span> simple = <span class='k'>true</span> <span class='b'>}</span>
<span class='k'>const</span> <span class='k'>class</span> Key
<span class='b'>{</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Predefined</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='k'>static</span> <span class='k'>const</span> Key <span id='a'>a</span>               := predefine<span class='b'>(</span><span class='s'>'a'</span>, <span class='s'>"A"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='b'>b</span>               := predefine<span class='b'>(</span><span class='s'>'b'</span>, <span class='s'>"B"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='c'>c</span>               := predefine<span class='b'>(</span><span class='s'>'c'</span>, <span class='s'>"C"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='d'>d</span>               := predefine<span class='b'>(</span><span class='s'>'d'</span>, <span class='s'>"D"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='e'>e</span>               := predefine<span class='b'>(</span><span class='s'>'e'</span>, <span class='s'>"E"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f'>f</span>               := predefine<span class='b'>(</span><span class='s'>'f'</span>, <span class='s'>"F"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='g'>g</span>               := predefine<span class='b'>(</span><span class='s'>'g'</span>, <span class='s'>"G"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='h'>h</span>               := predefine<span class='b'>(</span><span class='s'>'h'</span>, <span class='s'>"H"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='i'>i</span>               := predefine<span class='b'>(</span><span class='s'>'i'</span>, <span class='s'>"I"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='j'>j</span>               := predefine<span class='b'>(</span><span class='s'>'j'</span>, <span class='s'>"J"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='k'>k</span>               := predefine<span class='b'>(</span><span class='s'>'k'</span>, <span class='s'>"K"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='l'>l</span>               := predefine<span class='b'>(</span><span class='s'>'l'</span>, <span class='s'>"L"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='m'>m</span>               := predefine<span class='b'>(</span><span class='s'>'m'</span>, <span class='s'>"M"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='n'>n</span>               := predefine<span class='b'>(</span><span class='s'>'n'</span>, <span class='s'>"N"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='o'>o</span>               := predefine<span class='b'>(</span><span class='s'>'o'</span>, <span class='s'>"O"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='p'>p</span>               := predefine<span class='b'>(</span><span class='s'>'p'</span>, <span class='s'>"P"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='q'>q</span>               := predefine<span class='b'>(</span><span class='s'>'q'</span>, <span class='s'>"Q"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='r'>r</span>               := predefine<span class='b'>(</span><span class='s'>'r'</span>, <span class='s'>"R"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='s'>s</span>               := predefine<span class='b'>(</span><span class='s'>'s'</span>, <span class='s'>"S"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='t'>t</span>               := predefine<span class='b'>(</span><span class='s'>'t'</span>, <span class='s'>"T"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='u'>u</span>               := predefine<span class='b'>(</span><span class='s'>'u'</span>, <span class='s'>"U"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='v'>v</span>               := predefine<span class='b'>(</span><span class='s'>'v'</span>, <span class='s'>"V"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='w'>w</span>               := predefine<span class='b'>(</span><span class='s'>'w'</span>, <span class='s'>"W"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='x'>x</span>               := predefine<span class='b'>(</span><span class='s'>'x'</span>, <span class='s'>"X"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='y'>y</span>               := predefine<span class='b'>(</span><span class='s'>'y'</span>, <span class='s'>"Y"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='z'>z</span>               := predefine<span class='b'>(</span><span class='s'>'z'</span>, <span class='s'>"Z"</span><span class='b'>)</span>

  <span class='k'>static</span> <span class='k'>const</span> Key <span id='num0'>num0</span>            := predefine<span class='b'>(</span><span class='s'>'0'</span>, <span class='s'>"0"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='num1'>num1</span>            := predefine<span class='b'>(</span><span class='s'>'1'</span>, <span class='s'>"1"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='num2'>num2</span>            := predefine<span class='b'>(</span><span class='s'>'2'</span>, <span class='s'>"2"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='num3'>num3</span>            := predefine<span class='b'>(</span><span class='s'>'3'</span>, <span class='s'>"3"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='num4'>num4</span>            := predefine<span class='b'>(</span><span class='s'>'4'</span>, <span class='s'>"4"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='num5'>num5</span>            := predefine<span class='b'>(</span><span class='s'>'5'</span>, <span class='s'>"5"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='num6'>num6</span>            := predefine<span class='b'>(</span><span class='s'>'6'</span>, <span class='s'>"6"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='num7'>num7</span>            := predefine<span class='b'>(</span><span class='s'>'7'</span>, <span class='s'>"7"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='num8'>num8</span>            := predefine<span class='b'>(</span><span class='s'>'8'</span>, <span class='s'>"8"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='num9'>num9</span>            := predefine<span class='b'>(</span><span class='s'>'9'</span>, <span class='s'>"9"</span><span class='b'>)</span>

  <span class='k'>static</span> <span class='k'>const</span> Key <span id='space'>space</span>           := predefine<span class='b'>(</span><span class='s'>' '</span>,  <span class='s'>"Space"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='backspace'>backspace</span>       := predefine<span class='b'>(</span><span class='s'>'\b'</span>, <span class='s'>"Backspace"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='enter'>enter</span>           := predefine<span class='b'>(</span><span class='s'>'\r'</span>, <span class='s'>"Enter"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='delete'>delete</span>          := predefine<span class='b'>(</span>0x7F, <span class='s'>"Del"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='esc'>esc</span>             := predefine<span class='b'>(</span>0x1B, <span class='s'>"Esc"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='tab'>tab</span>             := predefine<span class='b'>(</span><span class='s'>'\t'</span>, <span class='s'>"Tab"</span><span class='b'>)</span>

  <span class='k'>static</span> <span class='k'>const</span> Key <span id='up'>up</span>              := predefine<span class='b'>(</span>0x0100_0000 + 1,  <span class='s'>"Up"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='down'>down</span>            := predefine<span class='b'>(</span>0x0100_0000 + 2,  <span class='s'>"Down"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='left'>left</span>            := predefine<span class='b'>(</span>0x0100_0000 + 3,  <span class='s'>"Left"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='right'>right</span>           := predefine<span class='b'>(</span>0x0100_0000 + 4,  <span class='s'>"Right"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='pageUp'>pageUp</span>          := predefine<span class='b'>(</span>0x0100_0000 + 5,  <span class='s'>"PageUp"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='pageDown'>pageDown</span>        := predefine<span class='b'>(</span>0x0100_0000 + 6,  <span class='s'>"PageDown"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='home'>home</span>            := predefine<span class='b'>(</span>0x0100_0000 + 7,  <span class='s'>"Home"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='end'>end</span>             := predefine<span class='b'>(</span>0x0100_0000 + 8,  <span class='s'>"End"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='insert'>insert</span>          := predefine<span class='b'>(</span>0x0100_0000 + 9,  <span class='s'>"Insert"</span><span class='b'>)</span>

  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f1'>f1</span>              := predefine<span class='b'>(</span>0x0100_0000 + 10, <span class='s'>"F1"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f2'>f2</span>              := predefine<span class='b'>(</span>0x0100_0000 + 11, <span class='s'>"F2"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f3'>f3</span>              := predefine<span class='b'>(</span>0x0100_0000 + 12, <span class='s'>"F3"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f4'>f4</span>              := predefine<span class='b'>(</span>0x0100_0000 + 13, <span class='s'>"F4"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f5'>f5</span>              := predefine<span class='b'>(</span>0x0100_0000 + 14, <span class='s'>"F5"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f6'>f6</span>              := predefine<span class='b'>(</span>0x0100_0000 + 15, <span class='s'>"F6"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f7'>f7</span>              := predefine<span class='b'>(</span>0x0100_0000 + 16, <span class='s'>"F7"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f8'>f8</span>              := predefine<span class='b'>(</span>0x0100_0000 + 17, <span class='s'>"F8"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f9'>f9</span>              := predefine<span class='b'>(</span>0x0100_0000 + 18, <span class='s'>"F9"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f10'>f10</span>             := predefine<span class='b'>(</span>0x0100_0000 + 19, <span class='s'>"F10"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f11'>f11</span>             := predefine<span class='b'>(</span>0x0100_0000 + 20, <span class='s'>"F11"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='f12'>f12</span>             := predefine<span class='b'>(</span>0x0100_0000 + 21, <span class='s'>"F12"</span><span class='b'>)</span>

  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypadMult'>keypadMult</span>      := predefine<span class='b'>(</span>0x0100_0000 + 42, <span class='s'>"Keypad*"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypadPlus'>keypadPlus</span>      := predefine<span class='b'>(</span>0x0100_0000 + 43, <span class='s'>"Keypad+"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypadMinus'>keypadMinus</span>     := predefine<span class='b'>(</span>0x0100_0000 + 45, <span class='s'>"Keypad-"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypadDot'>keypadDot</span>       := predefine<span class='b'>(</span>0x0100_0000 + 46, <span class='s'>"Keypad."</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypadDiv'>keypadDiv</span>       := predefine<span class='b'>(</span>0x0100_0000 + 47, <span class='s'>"Keypad/"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypad0'>keypad0</span>         := predefine<span class='b'>(</span>0x0100_0000 + 48, <span class='s'>"Keypad0"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypad1'>keypad1</span>         := predefine<span class='b'>(</span>0x0100_0000 + 49, <span class='s'>"Keypad1"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypad2'>keypad2</span>         := predefine<span class='b'>(</span>0x0100_0000 + 50, <span class='s'>"Keypad2"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypad3'>keypad3</span>         := predefine<span class='b'>(</span>0x0100_0000 + 51, <span class='s'>"Keypad3"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypad4'>keypad4</span>         := predefine<span class='b'>(</span>0x0100_0000 + 52, <span class='s'>"Keypad4"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypad5'>keypad5</span>         := predefine<span class='b'>(</span>0x0100_0000 + 53, <span class='s'>"Keypad5"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypad6'>keypad6</span>         := predefine<span class='b'>(</span>0x0100_0000 + 54, <span class='s'>"Keypad6"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypad7'>keypad7</span>         := predefine<span class='b'>(</span>0x0100_0000 + 55, <span class='s'>"Keypad7"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypad8'>keypad8</span>         := predefine<span class='b'>(</span>0x0100_0000 + 56, <span class='s'>"Keypad8"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypad9'>keypad9</span>         := predefine<span class='b'>(</span>0x0100_0000 + 57, <span class='s'>"Keypad9"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypadEqual'>keypadEqual</span>     := predefine<span class='b'>(</span>0x0100_0000 + 61, <span class='s'>"Keypad="</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='keypadEnter'>keypadEnter</span>     := predefine<span class='b'>(</span>0x0100_0000 + 80, <span class='s'>"KeypadEnter"</span><span class='b'>)</span>

  <span class='k'>static</span> <span class='k'>const</span> Key <span id='capsLock'>capsLock</span>        := predefine<span class='b'>(</span>0x0100_0000 + 82, <span class='s'>"CapsLock"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='numLock'>numLock</span>         := predefine<span class='b'>(</span>0x0100_0000 + 83, <span class='s'>"NumLock"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='scrollLock'>scrollLock</span>      := predefine<span class='b'>(</span>0x0100_0000 + 84, <span class='s'>"ScrollLock"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='pause'>pause</span>           := predefine<span class='b'>(</span>0x0100_0000 + 85, <span class='s'>"Pause"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='printScreen'>printScreen</span>     := predefine<span class='b'>(</span>0x0100_0000 + 87, <span class='s'>"PrintScreen"</span><span class='b'>)</span>

  <span class='k'>static</span> <span class='k'>const</span> Key <span id='alt'>alt</span>             := predefine<span class='b'>(</span>0x0001_0000, <span class='s'>"Alt"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='shift'>shift</span>           := predefine<span class='b'>(</span>0x0002_0000, <span class='s'>"Shift"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='ctrl'>ctrl</span>            := predefine<span class='b'>(</span>0x0004_0000, <span class='s'>"Ctrl"</span><span class='b'>)</span>
  <span class='k'>static</span> <span class='k'>const</span> Key <span id='command'>command</span>         := predefine<span class='b'>(</span>0x0040_0000, <span class='s'>"Command"</span><span class='b'>)</span>

  <span class='k'>private</span> <span class='k'>new</span> <span id='predefine'>predefine</span><span class='b'>(</span>Int mask, Str str, Bool mod := <span class='k'>false</span><span class='b'>)</span>
  <span class='b'>{</span>
    <span class='k'>this</span>.mask = mask
    <span class='k'>this</span>.str  = str
  <span class='b'>}</span>

  <span class='k'>private</span> <span class='k'>static</span> <span class='k'>const</span> Int <span id='modifierMask'>modifierMask</span> := alt.mask.or<span class='b'>(</span>shift.mask<span class='b'>)</span>.or<span class='b'>(</span>ctrl.mask<span class='b'>)</span>.or<span class='b'>(</span>command.mask<span class='b'>)</span>
  <span class='k'>private</span> <span class='k'>static</span> <span class='k'>const</span> Int <span id='modifierUnmask'>modifierUnmask</span> := modifierMask.not
  <span class='k'>private</span> <span class='k'>static</span> <span class='k'>const</span> Key <span id='none'>none</span> := predefine<span class='b'>(</span>0, <span class='s'>""</span><span class='b'>)</span>
  <span class='k'>private</span> <span class='k'>static</span> <span class='k'>const</span> Int:Key <span id='byMask'>byMask</span>
  <span class='k'>private</span> <span class='k'>static</span> <span class='k'>const</span> Str:Key <span id='byStr'>byStr</span>
  <span class='k'>static</span>
  <span class='b'>{</span>
    m := Int:Key<span class='b'>[</span>:<span class='b'>]</span>
    s := Str:Key<span class='b'>[</span>:<span class='b'>]</span>
    Key#.fields.each |Field f|
    <span class='b'>{</span>
      <span class='k'>if</span> <span class='b'>(</span>f.isStatic &amp;&amp; f.type == Key#<span class='b'>)</span>
      <span class='b'>{</span>
        Key key := f.get<span class='b'>(</span><span class='k'>null</span><span class='b'>)</span>
        m<span class='b'>[</span>key.mask<span class='b'>]</span> = key
        <span class='k'>if</span> <span class='b'>(</span>!key.str.isEmpty<span class='b'>)</span> s<span class='b'>[</span>key.str<span class='b'>]</span>  = key
      <span class='b'>}</span>
    <span class='b'>}</span>
    byMask = m
    byStr  = s
  <span class='b'>}</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Construction</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>**</span>
  <span class='z'>** Parse font from string (see `toStr`).  If invalid</span>
  <span class='z'>** and checked is true then throw ParseErr otherwise</span>
  <span class='z'>** return null.</span>
  <span class='z'>**</span>
  <span class='k'>static</span> Key? <span id='fromStr'>fromStr</span><span class='b'>(</span>Str s, Bool checked := <span class='k'>true</span><span class='b'>)</span>
  <span class='b'>{</span>
    <span class='k'>try</span>
    <span class='b'>{</span>
      <span class='y'>// check predefined name</span>
      key := byStr<span class='b'>[</span>s<span class='b'>]</span>
      <span class='k'>if</span> <span class='b'>(</span>key != <span class='k'>null</span><span class='b'>)</span> <span class='k'>return</span> key

      <span class='y'>// split by +</span>
      toks := s.split<span class='b'>(</span><span class='s'>'+'</span><span class='b'>)</span>

      <span class='y'>// if one token, then single key not predefined</span>
      <span class='k'>if</span> <span class='b'>(</span>toks.size == 1<span class='b'>)</span>
      <span class='b'>{</span>
        x := toks.first
        <span class='k'>if</span> <span class='b'>(</span>x.size == 1 &amp;&amp; !x<span class='b'>[</span>0<span class='b'>]</span>.isAlpha<span class='b'>)</span> <span class='k'>return</span> makeNew<span class='b'>(</span>x<span class='b'>[</span>0<span class='b'>]</span>, x<span class='b'>)</span>
        <span class='k'>throw</span> Err<span class='b'>()</span>
      <span class='b'>}</span>

      <span class='y'>// combine</span>
      mask := 0
      gotBase := <span class='k'>false</span>
      toks.each |Str tok|
      <span class='b'>{</span>
        part := fromStr<span class='b'>(</span>tok<span class='b'>)</span>
        <span class='k'>if</span> <span class='b'>(</span>!part.isModifier<span class='b'>)</span>
        <span class='b'>{</span>
          <span class='k'>if</span> <span class='b'>(</span>gotBase<span class='b'>)</span> <span class='k'>throw</span> Err<span class='b'>()</span>
          gotBase = <span class='k'>true</span>
        <span class='b'>}</span>
        mask = mask.or<span class='b'>(</span>part.mask<span class='b'>)</span>
      <span class='b'>}</span>
      <span class='k'>return</span> makeNew<span class='b'>(</span>mask, <span class='k'>null</span><span class='b'>)</span>
    <span class='b'>}</span>
    <span class='k'>catch</span> <span class='b'>{}</span>
    <span class='k'>if</span> <span class='b'>(</span>checked<span class='b'>)</span> <span class='k'>throw</span> ParseErr<span class='b'>(</span><span class='s'>"Invalid Key: $s"</span><span class='b'>)</span>
    <span class='k'>return</span> <span class='k'>null</span>
  <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Iternal lookup by mask: we either return a predefined</span>
  <span class='z'>** instance or create a new one just in case we don't have</span>
  <span class='z'>** a predefined instance defined.</span>
  <span class='z'>**</span>
  <span class='k'>internal</span> <span class='k'>static</span> Key <span id='fromMask'>fromMask</span><span class='b'>(</span>Int mask<span class='b'>)</span>
  <span class='b'>{</span>
    <span class='k'>return</span> byMask<span class='b'>[</span>mask<span class='b'>]</span> ?: makeNew<span class='b'>(</span>mask, mask.toChar<span class='b'>)</span>
  <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Private constructor</span>
  <span class='z'>**</span>
  <span class='k'>private</span> <span class='k'>new</span> <span id='makeNew'>makeNew</span><span class='b'>(</span>Int mask, Str? str<span class='b'>)</span>
  <span class='b'>{</span>
    <span class='k'>this</span>.mask = mask
    <span class='k'>this</span>.str  = str
  <span class='b'>}</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Identity</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>**</span>
  <span class='z'>** Hash code is based on keycode.</span>
  <span class='z'>**</span>
  <span class='k'>override</span> Int <span id='hash'>hash</span><span class='b'>()</span>
  <span class='b'>{</span>
    <span class='k'>return</span> mask
  <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Equality is based on keycode.</span>
  <span class='z'>**</span>
  <span class='k'>override</span> Bool <span id='equals'>equals</span><span class='b'>(</span>Obj? that<span class='b'>)</span>
  <span class='b'>{</span>
    x := that <span class='k'>as</span> Key
    <span class='k'>if</span> <span class='b'>(</span>x == <span class='k'>null</span><span class='b'>)</span> <span class='k'>return</span> <span class='k'>false</span>
    <span class='k'>return</span> mask == x.mask
  <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Format as key names combined with "+" symbol.</span>
  <span class='z'>**</span>
  <span class='k'>override</span> Str <span id='toStr'>toStr</span><span class='b'>()</span>
  <span class='b'>{</span>
    <span class='k'>if</span> <span class='b'>(</span>str != <span class='k'>null</span><span class='b'>)</span> <span class='k'>return</span> str
    s := StrBuf<span class='b'>()</span>
    <span class='k'>if</span> <span class='b'>(</span>isShift<span class='b'>)</span>   s.join<span class='b'>(</span>shift.str,   <span class='s'>"+"</span><span class='b'>)</span>
    <span class='k'>if</span> <span class='b'>(</span>isAlt<span class='b'>)</span>     s.join<span class='b'>(</span>alt.str,     <span class='s'>"+"</span><span class='b'>)</span>
    <span class='k'>if</span> <span class='b'>(</span>isCtrl<span class='b'>)</span>    s.join<span class='b'>(</span>ctrl.str,    <span class='s'>"+"</span><span class='b'>)</span>
    <span class='k'>if</span> <span class='b'>(</span>isCommand<span class='b'>)</span> s.join<span class='b'>(</span>command.str, <span class='s'>"+"</span><span class='b'>)</span>
    baseMask := mask.and<span class='b'>(</span>modifierUnmask<span class='b'>)</span>
    <span class='k'>if</span> <span class='b'>(</span>baseMask != 0<span class='b'>)</span> s.join<span class='b'>(</span>fromMask<span class='b'>(</span>baseMask<span class='b'>)</span>.str, <span class='s'>"+"</span><span class='b'>)</span>
    <span class='k'>return</span> s.toStr
  <span class='b'>}</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Modifiers</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>**</span>
  <span class='z'>** Decompose a key combination into its individual keys.</span>
  <span class='z'>** If instance isn't a combination then return a list with</span>
  <span class='z'>** one item (this instance).</span>
  <span class='z'>**</span>
  Key<span class='b'>[]</span> <span id='list'>list</span><span class='b'>()</span>
  <span class='b'>{</span>
    toStr.split<span class='b'>(</span><span class='s'>'+'</span><span class='b'>)</span>.map |Str tok-&gt;Key| <span class='b'>{</span> fromStr<span class='b'>(</span>tok<span class='b'>)</span> <span class='b'>}</span>
  <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Decompose the key into its primary key (without modifiers).</span>
  <span class='z'>**</span>
  Key <span id='primary'>primary</span><span class='b'>()</span> <span class='b'>{</span> fromMask<span class='b'>(</span>mask.and<span class='b'>(</span>modifierMask.not<span class='b'>))</span> <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Return a Key instance with only the modifiers.</span>
  <span class='z'>**</span>
  Key <span id='modifiers'>modifiers</span><span class='b'>()</span> <span class='b'>{</span> fromMask<span class='b'>(</span>mask.and<span class='b'>(</span>modifierMask<span class='b'>))</span> <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Is this instance is a modifier which may be combined</span>
  <span class='z'>** with other keys: shift, alt, ctrl, command.</span>
  <span class='z'>**</span>
  Bool <span id='isModifier'>isModifier</span><span class='b'>()</span> <span class='b'>{</span> mask.and<span class='b'>(</span>modifierUnmask<span class='b'>)</span> == 0 <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Return if any of the modifier keys are down.</span>
  <span class='z'>**</span>
  Bool <span id='hasModifier'>hasModifier</span><span class='b'>()</span> <span class='b'>{</span> mask.and<span class='b'>(</span>modifierMask<span class='b'>)</span> != 0 <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Return if the specified modifier is down.</span>
  <span class='z'>**</span>
  Bool <span id='isDown'>isDown</span><span class='b'>(</span>Key modifier<span class='b'>)</span> <span class='b'>{</span> mask.and<span class='b'>(</span>modifier.mask<span class='b'>)</span> != 0 <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Convenience for 'isDown(shift)'</span>
  <span class='z'>**</span>
  Bool <span id='isShift'>isShift</span><span class='b'>()</span> <span class='b'>{</span> isDown<span class='b'>(</span>shift<span class='b'>)</span> <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Convenience for 'isDown(alt)'</span>
  <span class='z'>**</span>
  Bool <span id='isAlt'>isAlt</span><span class='b'>()</span> <span class='b'>{</span> isDown<span class='b'>(</span>alt<span class='b'>)</span> <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Convenience for 'isDown(ctrl)'</span>
  <span class='z'>**</span>
  Bool <span id='isCtrl'>isCtrl</span><span class='b'>()</span> <span class='b'>{</span> isDown<span class='b'>(</span>ctrl<span class='b'>)</span> <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Convenience for 'isDown(comand)'</span>
  <span class='z'>**</span>
  Bool <span id='isCommand'>isCommand</span><span class='b'>()</span> <span class='b'>{</span> isDown<span class='b'>(</span>command<span class='b'>)</span> <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Add two keys to create a new key combination.</span>
  <span class='z'>** Throws ArgErr if neither this nor x returns true</span>
  <span class='z'>** true for `isModifier`.</span>
  <span class='z'>**</span>
  @Operator Key <span id='plus'>plus</span><span class='b'>(</span>Key x<span class='b'>)</span>
  <span class='b'>{</span>
    <span class='k'>if</span> <span class='b'>(</span>!isModifier &amp;&amp; !x.isModifier<span class='b'>)</span> <span class='k'>throw</span> ArgErr<span class='b'>(</span><span class='s'>"Neither is modifier: $this + $x"</span><span class='b'>)</span>
    <span class='k'>return</span> makeNew<span class='b'>(</span>mask.or<span class='b'>(</span>x.mask<span class='b'>)</span>, <span class='k'>null</span><span class='b'>)</span>
  <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** Replace one modifier with another modifer.  If</span>
  <span class='z'>** modFrom is not defined in this key, then return this.</span>
  <span class='z'>**</span>
  Key <span id='replace'>replace</span><span class='b'>(</span>Key modFrom, Key modTo<span class='b'>)</span>
  <span class='b'>{</span>
    <span class='k'>if</span> <span class='b'>((</span>mask.and<span class='b'>(</span>modFrom.mask<span class='b'>))</span> == 0<span class='b'>)</span> <span class='k'>return</span> <span class='k'>this</span>;
    <span class='k'>return</span> makeNew<span class='b'>((</span>mask.and<span class='b'>(</span>modFrom.mask.not<span class='b'>))</span>.or<span class='b'>(</span>modTo.mask<span class='b'>)</span>, <span class='k'>null</span><span class='b'>)</span>;
  <span class='b'>}</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Fields</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>** Internal mask is based on SWT mask values</span>
  <span class='k'>internal</span> <span class='k'>const</span> Int <span id='mask'>mask</span>

  <span class='z'>** String encoding (if null we have to calcualte in toStr)</span>
  <span class='k'>internal</span> <span class='k'>const</span> Str? <span id='str'>str</span>
<span class='b'>}</span></pre>
</div>
</div>
<div class='sidebar'>
<h2>More Info</h2>
<ul class='clean'>
  <li><a href='Key.html'>View Fandoc</a></li>
</ul>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li style='display: block;'><a href='#a'>a</a></li>
  <li style='display: block;'><a href='#alt'>alt</a></li>
  <li style='display: block;'><a href='#b'>b</a></li>
  <li style='display: block;'><a href='#backspace'>backspace</a></li>
  <li class='hidden' style='display: block;'><a href='#byMask'>byMask</a></li>
  <li class='hidden' style='display: block;'><a href='#byStr'>byStr</a></li>
  <li style='display: block;'><a href='#c'>c</a></li>
  <li style='display: block;'><a href='#capsLock'>capsLock</a></li>
  <li style='display: block;'><a href='#command'>command</a></li>
  <li style='display: block;'><a href='#ctrl'>ctrl</a></li>
  <li style='display: block;'><a href='#d'>d</a></li>
  <li style='display: block;'><a href='#delete'>delete</a></li>
  <li style='display: block;'><a href='#down'>down</a></li>
  <li style='display: block;'><a href='#e'>e</a></li>
  <li style='display: block;'><a href='#end'>end</a></li>
  <li style='display: block;'><a href='#enter'>enter</a></li>
  <li style='display: block;'><a href='#equals'>equals</a></li>
  <li style='display: block;'><a href='#esc'>esc</a></li>
  <li style='display: block;'><a href='#f'>f</a></li>
  <li style='display: block;'><a href='#f1'>f1</a></li>
  <li style='display: block;'><a href='#f10'>f10</a></li>
  <li style='display: block;'><a href='#f11'>f11</a></li>
  <li style='display: block;'><a href='#f12'>f12</a></li>
  <li style='display: block;'><a href='#f2'>f2</a></li>
  <li style='display: block;'><a href='#f3'>f3</a></li>
  <li style='display: block;'><a href='#f4'>f4</a></li>
  <li style='display: block;'><a href='#f5'>f5</a></li>
  <li style='display: block;'><a href='#f6'>f6</a></li>
  <li style='display: block;'><a href='#f7'>f7</a></li>
  <li style='display: block;'><a href='#f8'>f8</a></li>
  <li style='display: block;'><a href='#f9'>f9</a></li>
  <li class='hidden' style='display: block;'><a href='#fromMask'>fromMask</a></li>
  <li style='display: block;'><a href='#fromStr'>fromStr</a></li>
  <li style='display: block;'><a href='#g'>g</a></li>
  <li style='display: block;'><a href='#h'>h</a></li>
  <li style='display: block;'><a href='#hasModifier'>hasModifier</a></li>
  <li style='display: block;'><a href='#hash'>hash</a></li>
  <li style='display: block;'><a href='#home'>home</a></li>
  <li style='display: block;'><a href='#i'>i</a></li>
  <li style='display: block;'><a href='#insert'>insert</a></li>
  <li style='display: block;'><a href='#isAlt'>isAlt</a></li>
  <li style='display: block;'><a href='#isCommand'>isCommand</a></li>
  <li style='display: block;'><a href='#isCtrl'>isCtrl</a></li>
  <li style='display: block;'><a href='#isDown'>isDown</a></li>
  <li style='display: block;'><a href='#isModifier'>isModifier</a></li>
  <li style='display: block;'><a href='#isShift'>isShift</a></li>
  <li style='display: block;'><a href='#j'>j</a></li>
  <li style='display: block;'><a href='#k'>k</a></li>
  <li style='display: block;'><a href='#keypad0'>keypad0</a></li>
  <li style='display: block;'><a href='#keypad1'>keypad1</a></li>
  <li style='display: block;'><a href='#keypad2'>keypad2</a></li>
  <li style='display: block;'><a href='#keypad3'>keypad3</a></li>
  <li style='display: block;'><a href='#keypad4'>keypad4</a></li>
  <li style='display: block;'><a href='#keypad5'>keypad5</a></li>
  <li style='display: block;'><a href='#keypad6'>keypad6</a></li>
  <li style='display: block;'><a href='#keypad7'>keypad7</a></li>
  <li style='display: block;'><a href='#keypad8'>keypad8</a></li>
  <li style='display: block;'><a href='#keypad9'>keypad9</a></li>
  <li style='display: block;'><a href='#keypadDiv'>keypadDiv</a></li>
  <li style='display: block;'><a href='#keypadDot'>keypadDot</a></li>
  <li style='display: block;'><a href='#keypadEnter'>keypadEnter</a></li>
  <li style='display: block;'><a href='#keypadEqual'>keypadEqual</a></li>
  <li style='display: block;'><a href='#keypadMinus'>keypadMinus</a></li>
  <li style='display: block;'><a href='#keypadMult'>keypadMult</a></li>
  <li style='display: block;'><a href='#keypadPlus'>keypadPlus</a></li>
  <li style='display: block;'><a href='#l'>l</a></li>
  <li style='display: block;'><a href='#left'>left</a></li>
  <li style='display: block;'><a href='#list'>list</a></li>
  <li style='display: block;'><a href='#m'>m</a></li>
  <li class='hidden' style='display: block;'><a href='#makeNew'>makeNew</a></li>
  <li class='hidden' style='display: block;'><a href='#mask'>mask</a></li>
  <li class='hidden' style='display: block;'><a href='#modifierMask'>modifierMask</a></li>
  <li class='hidden' style='display: block;'><a href='#modifierUnmask'>modifierUnmask</a></li>
  <li style='display: block;'><a href='#modifiers'>modifiers</a></li>
  <li style='display: block;'><a href='#n'>n</a></li>
  <li class='hidden' style='display: block;'><a href='#none'>none</a></li>
  <li style='display: block;'><a href='#num0'>num0</a></li>
  <li style='display: block;'><a href='#num1'>num1</a></li>
  <li style='display: block;'><a href='#num2'>num2</a></li>
  <li style='display: block;'><a href='#num3'>num3</a></li>
  <li style='display: block;'><a href='#num4'>num4</a></li>
  <li style='display: block;'><a href='#num5'>num5</a></li>
  <li style='display: block;'><a href='#num6'>num6</a></li>
  <li style='display: block;'><a href='#num7'>num7</a></li>
  <li style='display: block;'><a href='#num8'>num8</a></li>
  <li style='display: block;'><a href='#num9'>num9</a></li>
  <li style='display: block;'><a href='#numLock'>numLock</a></li>
  <li style='display: block;'><a href='#o'>o</a></li>
  <li style='display: block;'><a href='#p'>p</a></li>
  <li style='display: block;'><a href='#pageDown'>pageDown</a></li>
  <li style='display: block;'><a href='#pageUp'>pageUp</a></li>
  <li style='display: block;'><a href='#pause'>pause</a></li>
  <li style='display: block;'><a href='#plus'>plus</a></li>
  <li class='hidden' style='display: block;'><a href='#predefine'>predefine</a></li>
  <li style='display: block;'><a href='#primary'>primary</a></li>
  <li style='display: block;'><a href='#printScreen'>printScreen</a></li>
  <li style='display: block;'><a href='#q'>q</a></li>
  <li style='display: block;'><a href='#r'>r</a></li>
  <li style='display: block;'><a href='#replace'>replace</a></li>
  <li style='display: block;'><a href='#right'>right</a></li>
  <li style='display: block;'><a href='#s'>s</a></li>
  <li style='display: block;'><a href='#scrollLock'>scrollLock</a></li>
  <li style='display: block;'><a href='#shift'>shift</a></li>
  <li style='display: block;'><a href='#space'>space</a></li>
  <li class='hidden' style='display: block;'><a href='#str'>str</a></li>
  <li style='display: block;'><a href='#t'>t</a></li>
  <li style='display: block;'><a href='#tab'>tab</a></li>
  <li style='display: block;'><a href='#toStr'>toStr</a></li>
  <li style='display: block;'><a href='#u'>u</a></li>
  <li style='display: block;'><a href='#up'>up</a></li>
  <li style='display: block;'><a href='#v'>v</a></li>
  <li style='display: block;'><a href='#w'>w</a></li>
  <li style='display: block;'><a href='#x'>x</a></li>
  <li style='display: block;'><a href='#y'>y</a></li>
  <li style='display: block;'><a href='#z'>z</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
fwt 1.0.56
[11-Nov-2010 Thu 10:08:25AM EST]
</p>
</div>
</div>
</body>
</html>
