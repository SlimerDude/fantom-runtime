<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>fwt::BorderPane</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>fwt</a></li>
  <li>&gt;</li>
  <li><a href='BorderPane.html'>BorderPane</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='type'>
<div class='overview'>
<h2>class</h2>
<h1>fwt::BorderPane</h1>
<pre><a href='../sys/Obj.html'>sys::Obj</a>
  <a href='Widget.html'>fwt::Widget</a>
    <a href='Pane.html'>fwt::Pane</a>
      fwt::BorderPane</pre>
</div>
</div>
<div class='src'>
<pre>
<span class='y'>//</span>
<span class='y'>// Copyright (c) 2008, Brian Frank and Andy Frank</span>
<span class='y'>// Licensed under the Academic Free License version 3.0</span>
<span class='y'>//</span>
<span class='y'>// History:</span>
<span class='y'>//   15 Sep 08  Andy Frank   Creation</span>
<span class='y'>//   10 Aug 09  Brian Frank  Refactor to use gfx::Border</span>
<span class='y'>//</span>

<span class='k'>using</span> gfx

<span class='z'>**</span>
<span class='z'>** BorderPane is used paint a CSS styled border around a content widget.</span>
<span class='z'>**</span>
@Js
@Serializable <span class='b'>{</span> collection = <span class='k'>true</span> <span class='b'>}</span>
<span class='k'>class</span> BorderPane : Pane
<span class='b'>{</span>
  <span class='z'>**</span>
  <span class='z'>** Border to paint around the edge of the content.</span>
  <span class='z'>** Default is zero pixels.</span>
  <span class='z'>**</span>
  Border <span id='border'>border</span> := Border<span class='b'>(</span><span class='s'>"0"</span><span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Background to paint under content, or null for transparent.</span>
  <span class='z'>** The background does not include the border itself, but</span>
  <span class='z'>** does include the insets and content.  Default is null.</span>
  <span class='z'>**</span>
  Brush? <span id='bg'>bg</span> := <span class='k'>null</span>

  <span class='z'>**</span>
  <span class='z'>** Insets to leave between border and the content.</span>
  <span class='z'>** Default is zero pixels.</span>
  <span class='z'>**</span>
  Insets <span id='insets'>insets</span> := Insets<span class='b'>(</span>0,0,0,0<span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** The content child widget.</span>
  <span class='z'>**</span>
  Widget? <span id='content'>content</span> <span class='b'>{</span> set <span class='b'>{</span> remove<span class='b'>(</span>&amp;content<span class='b'>)</span>; Widget.<span class='k'>super</span>.add<span class='b'>(</span>it<span class='b'>)</span>; &amp;content = it<span class='b'>}</span> <span class='b'>}</span>

  <span class='z'>**</span>
  <span class='z'>** If this the first widget added, then assume it the content.</span>
  <span class='z'>**</span>
  <span class='k'>override</span> This <span id='add'>add</span><span class='b'>(</span>Widget? child<span class='b'>)</span>
  <span class='b'>{</span>
    <span class='k'>if</span> <span class='b'>(</span>&amp;content == <span class='k'>null</span><span class='b'>)</span> &amp;content=child
    <span class='k'>super</span>.add<span class='b'>(</span>child<span class='b'>)</span>
    <span class='k'>return</span> <span class='k'>this</span>
  <span class='b'>}</span>

  <span class='k'>override</span> Size <span id='prefSize'>prefSize</span><span class='b'>(</span>Hints hints := Hints.defVal<span class='b'>)</span>
  <span class='b'>{</span>
    edgew := border.widthLeft + insets.left + insets.right  + border.widthRight
    edgeh := border.widthTop  + insets.top  + insets.bottom + border.widthBottom
    edge  := Size<span class='b'>(</span>edgew, edgeh<span class='b'>)</span>
    <span class='k'>if</span> <span class='b'>(</span>content == <span class='k'>null</span><span class='b'>)</span> <span class='k'>return</span> edge
    pref  := content.prefSize<span class='b'>(</span>hints - edge<span class='b'>)</span>
    <span class='k'>return</span> Size<span class='b'>(</span>pref.w + edgew, pref.h + edgeh<span class='b'>)</span>
  <span class='b'>}</span>

  <span class='k'>override</span> Void <span id='onLayout'>onLayout</span><span class='b'>()</span>
  <span class='b'>{</span>
    <span class='k'>if</span> <span class='b'>(</span>content == <span class='k'>null</span><span class='b'>)</span> <span class='k'>return</span>
    size := <span class='k'>this</span>.size
    content.bounds = Rect<span class='b'>(</span>
      border.widthLeft + insets.left,
      border.widthTop + insets.top,
      size.w - border.widthLeft - insets.left - insets.right  - border.widthRight,
      size.h - border.widthTop  - insets.top  - insets.bottom - border.widthBottom<span class='b'>)</span>
  <span class='b'>}</span>

  <span class='k'>internal</span> Void <span id='onPaint'>onPaint</span><span class='b'>(</span>Graphics g<span class='b'>)</span>
  <span class='b'>{</span>
    w := size.w
    h := size.h
    shade := 0.3f

    <span class='y'>// background (doesn't support radius well yet)</span>
    <span class='k'>if</span> <span class='b'>(</span>bg != <span class='k'>null</span><span class='b'>)</span>
    <span class='b'>{</span>
      g.brush = bg
      g.fillRect<span class='b'>(</span>0, 0, w, h<span class='b'>)</span>
    <span class='b'>}</span>

    <span class='y'>// left side</span>
    <span class='k'>if</span> <span class='b'>(</span>border.widthLeft &gt; 0<span class='b'>)</span>
    <span class='b'>{</span>
      g.pen = Pen <span class='b'>{</span> width = border.widthLeft <span class='b'>}</span>
      <span class='k'>switch</span> <span class='b'>(</span>border.styleLeft<span class='b'>)</span>
      <span class='b'>{</span>
        <span class='k'>case</span> Border.styleInset:  g.brush = border.colorLeft.darker<span class='b'>(</span>shade<span class='b'>)</span>
        <span class='k'>case</span> Border.styleOutset: g.brush = border.colorLeft.lighter<span class='b'>(</span>shade<span class='b'>)</span>
        <span class='k'>default</span>:                 g.brush = border.colorLeft
      <span class='b'>}</span>

      off := border.widthLeft / 2
      x := off

      g.drawLine<span class='b'>(</span>x, border.radiusTopLeft+off, x, h-border.radiusBottomLeft-off<span class='b'>)</span>
    <span class='b'>}</span>

    <span class='y'>// right side</span>
    <span class='k'>if</span> <span class='b'>(</span>border.widthRight &gt; 0<span class='b'>)</span>
    <span class='b'>{</span>
      g.pen = Pen <span class='b'>{</span> width = border.widthRight <span class='b'>}</span>
      <span class='k'>switch</span> <span class='b'>(</span>border.styleRight<span class='b'>)</span>
      <span class='b'>{</span>
        <span class='k'>case</span> Border.styleInset:  g.brush = border.colorRight.lighter<span class='b'>(</span>shade<span class='b'>)</span>
        <span class='k'>case</span> Border.styleOutset: g.brush = border.colorRight.darker<span class='b'>(</span>shade<span class='b'>)</span>
        <span class='k'>default</span>:                 g.brush = border.colorRight
      <span class='b'>}</span>

      off := border.widthRight / 2
      <span class='k'>if</span> <span class='b'>(</span>border.widthRight.isOdd<span class='b'>)</span> ++off
      x := w - off

      g.drawLine<span class='b'>(</span>x, border.radiusTopRight+off, x, h-border.radiusBottomRight-off<span class='b'>)</span>
    <span class='b'>}</span>

    <span class='y'>// top side</span>
    <span class='k'>if</span> <span class='b'>(</span>border.widthTop &gt; 0<span class='b'>)</span>
    <span class='b'>{</span>
      g.pen = Pen <span class='b'>{</span> width = border.widthTop <span class='b'>}</span>
      <span class='k'>switch</span> <span class='b'>(</span>border.styleTop<span class='b'>)</span>
      <span class='b'>{</span>
        <span class='k'>case</span> Border.styleInset:  g.brush = border.colorTop.darker<span class='b'>(</span>shade<span class='b'>)</span>
        <span class='k'>case</span> Border.styleOutset: g.brush = border.colorTop.lighter<span class='b'>(</span>shade<span class='b'>)</span>
        <span class='k'>default</span>:                 g.brush = border.colorTop
      <span class='b'>}</span>

      off := border.widthTop / 2
      y := off

      g.drawLine<span class='b'>(</span>border.radiusTopLeft+off, y, w-border.radiusTopRight-off, y<span class='b'>)</span>

      <span class='y'>// top-left corner</span>
      <span class='k'>if</span> <span class='b'>(</span>border.radiusTopLeft &gt; 0<span class='b'>)</span>
        g.drawArc<span class='b'>(</span>off, off, border.radiusTopLeft*2, border.radiusTopLeft*2, 90, 90<span class='b'>)</span>

      <span class='y'>// top-right corner</span>
      <span class='k'>if</span> <span class='b'>(</span>border.radiusTopRight &gt; 0<span class='b'>)</span>
        g.drawArc<span class='b'>(</span>w-border.radiusTopRight*2-off-1, off, border.radiusTopRight*2, border.radiusTopRight*2, 0, 90<span class='b'>)</span>
    <span class='b'>}</span>

    <span class='y'>// bottom side</span>
    <span class='k'>if</span> <span class='b'>(</span>border.widthBottom &gt; 0<span class='b'>)</span>
    <span class='b'>{</span>
      g.pen = Pen <span class='b'>{</span> width = border.widthBottom <span class='b'>}</span>
      <span class='k'>switch</span> <span class='b'>(</span>border.styleBottom<span class='b'>)</span>
      <span class='b'>{</span>
        <span class='k'>case</span> Border.styleInset:  g.brush = border.colorBottom.lighter<span class='b'>(</span>shade<span class='b'>)</span>
        <span class='k'>case</span> Border.styleOutset: g.brush = border.colorBottom.darker<span class='b'>(</span>shade<span class='b'>)</span>
        <span class='k'>default</span>:                 g.brush = border.colorBottom
      <span class='b'>}</span>

      off := border.widthBottom / 2
      <span class='k'>if</span> <span class='b'>(</span>border.widthBottom.isOdd<span class='b'>)</span> ++off
      y := h - off

      g.drawLine<span class='b'>(</span>border.radiusBottomLeft+off, y, w-border.radiusBottomRight-off, y<span class='b'>)</span>

      <span class='y'>// bottom-left corner</span>
      <span class='k'>if</span> <span class='b'>(</span>border.radiusBottomLeft &gt; 0<span class='b'>)</span>
        g.drawArc<span class='b'>(</span>off, h-border.radiusBottomLeft*2-off, border.radiusBottomLeft*2, border.radiusBottomLeft*2, 180, 90<span class='b'>)</span>

      <span class='y'>// bottom-right corner</span>
      <span class='k'>if</span> <span class='b'>(</span>border.radiusBottomRight &gt; 0<span class='b'>)</span>
        g.drawArc<span class='b'>(</span>w-border.radiusBottomRight*2-off, h-border.radiusBottomRight*2-off, border.radiusBottomRight*2, border.radiusBottomRight*2, 270, 90<span class='b'>)</span>
    <span class='b'>}</span>
  <span class='b'>}</span>

  <span class='y'>// to force native peer</span>
  <span class='k'>private</span> <span class='k'>native</span> Void <span id='dummyBorderPane'>dummyBorderPane</span><span class='b'>()</span>

<span class='b'>}</span>

</pre>
</div>
</div>
<div class='sidebar'>
<h2>More Info</h2>
<ul class='clean'>
  <li><a href='BorderPane.html'>View Fandoc</a></li>
</ul>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li style='display: block;'><a href='#add'>add</a></li>
  <li style='display: block;'><a href='#bg'>bg</a></li>
  <li style='display: block;'><a href='#border'>border</a></li>
  <li style='display: block;'><a href='#content'>content</a></li>
  <li class='hidden' style='display: block;'><a href='#dummyBorderPane'>dummyBorderPane</a></li>
  <li style='display: block;'><a href='#insets'>insets</a></li>
  <li style='display: block;'><a href='#onLayout'>onLayout</a></li>
  <li class='hidden' style='display: block;'><a href='#onPaint'>onPaint</a></li>
  <li style='display: block;'><a href='#prefSize'>prefSize</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
fwt 1.0.56
[11-Nov-2010 Thu 10:08:25AM EST]
</p>
</div>
</div>
</body>
</html>
