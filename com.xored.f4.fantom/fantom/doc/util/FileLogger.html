<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>util::FileLogger</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>util</a></li>
  <li>&gt;</li>
  <li><a href='FileLogger.html'>FileLogger</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='type'>
<div class='overview'>
<h2>const class</h2>
<h1>util::FileLogger</h1>
<pre><a href='../sys/Obj.html'>sys::Obj</a>
  <a href='../concurrent/ActorPool.html'>concurrent::ActorPool</a>
    util::FileLogger</pre>
</div>
<div class='detail'>

<p>FileLogger appends Str log entries to a file.  You can add a FileLogger as a Log handler:</p>

<pre>sysLogger := FileLogger
{
  dir = scriptDir
  filename = "sys-{YYMM}.log"
}
Log.addHandler |rec| { sysLogger.writeLogRec(rec) }</pre>

<p>See <a href='FileLogger.html#filename'>filename</a> for specifying a datetime pattern for your log files.</p>
</div>
</div>
<div class='slots'>
<div class='detail'>
<h2>Slots</h2>
<dl>
<dt id='actor' class='field hidden'>actor<a href='FileLogger_src.html#actor'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>const private <a href='../concurrent/Actor.html'>Actor</a> actor := Actor(this) |Obj?->Obj?| { ... }</code></p>
</dd>
<dt id='dir' class='field'>dir<a href='FileLogger_src.html#dir'>Source</a></dt>
<dd>
<p><code class='sig'>const <a href='../sys/File.html'>File</a> dir</code></p>

<p>Directory used to store log file(s).</p>
</dd>
<dt id='filename' class='field'>filename<a href='FileLogger_src.html#filename'>Source</a></dt>
<dd>
<p><code class='sig'>const <a href='../sys/Str.html'>Str</a> filename</code></p>

<p>Log filename pattern.  The name may contain a pattern between <code>{}</code> using the pattern format of <code><a href='../sys/DateTime.html#toLocale'>sys::DateTime.toLocale</a></code>.  For example to maintain a log file per month, use a filename such as "mylog-{YYYY-MM}.log".</p>
</dd>
<dt id='log' class='field hidden'>log<a href='FileLogger_src.html#log'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>const static private <a href='../sys/Log.html'>Log</a> log := Log.get("logger")</code></p>
</dd>
<dt id='make' class='method'>make<a href='FileLogger_src.html#make'>Source</a></dt>
<dd>
<p><code class='sig'>new make(|<a href='../sys/This.html'>This</a>|? f := null)</code></p>

<p>Constructor must set <a href='FileLogger.html#dir'>dir</a> and <a href='FileLogger.html#filename'>filename</a></p>
</dd>
<dt id='onOpen' class='field'>onOpen<a href='FileLogger_src.html#onOpen'>Source</a></dt>
<dd>
<p><code class='sig'>const |<a href='../sys/OutStream.html'>OutStream</a>|? onOpen</code></p>

<p>Callback called each time the file logger opens an existing or new log file.  Callback should write any header information to the given output stream.  The callback will occur on the logger's actor, so take care not incur additional actor messaging.</p>
</dd>
<dt id='receive' class='method hidden'>receive<a href='FileLogger_src.html#receive'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>internal <a href='../sys/Obj.html'>Obj</a>? receive(<a href='../sys/Obj.html'>Obj</a> msg)</code></p>

<p>Run the script</p>
</dd>
<dt id='writeLogRec' class='method'>writeLogRec<a href='FileLogger_src.html#writeLogRec'>Source</a></dt>
<dd>
<p><code class='sig'><a href='../sys/Void.html'>Void</a> writeLogRec(<a href='../sys/LogRec.html'>LogRec</a> rec)</code></p>

<p>Append string log message to file.</p>
</dd>
<dt id='writeStr' class='method'>writeStr<a href='FileLogger_src.html#writeStr'>Source</a></dt>
<dd>
<p><code class='sig'><a href='../sys/Void.html'>Void</a> writeStr(<a href='../sys/Str.html'>Str</a> msg)</code></p>

<p>Append string log message to file.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class='sidebar'>
<h2>Type</h2>
<ul class='clean'>
  <li><a href='FileLogger_src.html'>View Source</a></li>
  <li><a href='#' onclick='ShowSlots.toggle(event); return false;'>Show All Slots</a></li>
</ul>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li class='hidden'><a href='#actor'>actor</a></li>
  <li><a href='#dir'>dir</a></li>
  <li><a href='#filename'>filename</a></li>
  <li class='hidden'><a href='#log'>log</a></li>
  <li><a href='#make'>make</a></li>
  <li><a href='#onOpen'>onOpen</a></li>
  <li class='hidden'><a href='#receive'>receive</a></li>
  <li><a href='#writeLogRec'>writeLogRec</a></li>
  <li><a href='#writeStr'>writeStr</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
util 1.0.56
[11-Nov-2010 Thu 10:08:19AM EST]
</p>
</div>
</div>
</body>
</html>
