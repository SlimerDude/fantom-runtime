<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>Fan</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>docTools</a></li>
  <li>&gt;</li>
  <li><a href='Fan.html'>Fan</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='prevNext'>
<div class='prev'><a href='Setup.html'><img src='../go-previous.png' alt='prev' /></a> <a href='Setup.html'>Setup</a></div>
<div class='next'><a href='Fansh.html'>Fansh</a> <a href='Fansh.html'><img src='../go-next.png' alt='next' /></a></div>
</div>
<h1 class='title'>Fan</h1>

<h1 id='overview'>Overview </h1>

<p>The <code>fan</code> launcher is used to run Fantom code.  It can be used in two ways:</p>

<ol style='list-style-type:decimal'>
<li>to execute a method in a precompiled pod</li>

<li>to run a script file ending with the ".fan" extension</li>
</ol>

<p>The <code>fan</code> executable also has a couple options useful to get version information.  The "-version" option will print the current version of the runtime being used and the configured repos.  You can use the "-pods" option to list all the installed pods.</p>

<h1 id='scripts'>Running Scripts </h1>

<p>If the first parameter passed to the <code>fan</code> executable is a filename which ends with ".fan" then the launcher will attempt to execute the script using the following steps:</p>

<ol style='list-style-type:decimal'>
<li>compile the script file</li>

<li>find the a class which defines a method called "main"</li>

<li>if the method is not static then call on an instance created via <code><a href='../sys/Type.html#make'>Type.make</a></code></li>

<li>if the method has a <code>Str[]</code> parameter then invoke it with <code>Env.args</code>, otherwise invoke with no arguments.</li>

<li>if main returns an Int, return that as exit code</li>
</ol>

<p>The script file can declare more than one type declaration, however only one type can define a method called "main".  A script can declare <code>using</code> statements or use fully qualified type names to access types from any pod.  However at this time a script cannot import types from another script file.</p>

<p>See <a href='../docIntro/HelloWorld.html#script'>HelloWorld</a> for an example of how run a script file.</p>

<p>Also see <a href='Setup.html#executableUnix'>unix setup</a> and <a href='Setup.html#executableWindows'>windows setup</a> to make fan scripts executable without calling the launcher explicitly.</p>

<h1 id='pods'>Running Pods </h1>

<p>You can use any of the following formats to execute a method in an installed pod:</p>

<pre>fan &lt;pod> [args]
fan &lt;pod>::&lt;type> [args]
fan &lt;pod>::&lt;type>.&lt;method> [args]</pre>

<p>The following steps are take to execute the method:</p>

<ol style='list-style-type:decimal'>
<li>if only a pod name is specified then assume <code>&lt;pod>::Main.main</code></li>

<li>if only a type name is specified then assume <code>&lt;pod>::&lt;type>.main</code></li>

<li>resolve the qualified name of the method</li>

<li>if the method is not static then call on an instance created via <code><a href='../sys/Type.html#make'>Type.make</a></code></li>

<li>if the method has a <code>Str[]</code> parameter then invoke it with <code>Env.args</code>, otherwise invoke with no arguments.</li>

<li>if main returns an Int, return that as exit code</li>
</ol>

<p>See <a href='../docIntro/HelloWorld.html#pod'>HelloWorld</a> for an example of how to build and run a method in a pod.</p>

<h1 id='main'>Main </h1>

<p>The main method can return Void or Int.  If the main method returns an Int, then it is returned as the exit code of the process, otherwise zero is returned (or non-zero if an exception is raised).</p>

<p>The main method either takes no arguments or <code>Str[]</code>.  You can access any arguments passed on the command line via  the <code><a href='../sys/Env.html#args'>Env.args</a></code> method.  All of these are valid main methods:</p>

<pre>Void make()
Void make(Str[] args)
Void make(Str[] args, Bool defaultsOk := true)
Int make()
Int make(Str[] args)
Int make(Str[] args, Bool defA := true, Int? defB := null)</pre>

<p>All of the main method signatures above can be static or instance based. If the main method is static then it is simply invoked using reflection. However if the main method is instance based, a new instance is created via <code><a href='../sys/Type.html#make'>Type.make</a></code> to use for the main method.  This technique can be used perform common initialization via a base class - in fact it is used by the <a href='Build.html'>build</a> scripts themselves.</p>
<div class='prevNext'>
<div class='prev'><a href='Setup.html'><img src='../go-previous.png' alt='prev' /></a> <a href='Setup.html'>Setup</a></div>
<div class='next'><a href='Fansh.html'>Fansh</a> <a href='Fansh.html'><img src='../go-next.png' alt='next' /></a></div>
</div>
</div>
<div class='sidebar'>
<h2>Contents</h2>
<ul>
<li><a href='#overview'>Overview </a></li><li><a href='#scripts'>Running Scripts </a></li><li><a href='#pods'>Running Pods </a></li><li><a href='#main'>Main </a></li></ul>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
docTools 1.0.56
[11-Nov-2010 Thu 10:08:29AM EST]
</p>
</div>
</div>
</body>
</html>
