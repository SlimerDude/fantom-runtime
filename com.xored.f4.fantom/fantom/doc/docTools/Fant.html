<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>Fant</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>docTools</a></li>
  <li>&gt;</li>
  <li><a href='Fant.html'>Fant</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='prevNext'>
<div class='prev'><a href='Fansh.html'><img src='../go-previous.png' alt='prev' /></a> <a href='Fansh.html'>Fansh</a></div>
<div class='next'><a href='Fanp.html'>Fanp</a> <a href='Fanp.html'><img src='../go-next.png' alt='next' /></a></div>
</div>
<h1 class='title'>Fant</h1>

<h1 id='overview'>Overview </h1>

<p>Fantom includes a unit test framework baked right into the runtime - it is very similar to common test frameworks such as <a href='http://www.junit.org/'>JUnit</a>. The key concepts for testing:</p>

<ul>
<li>Write <em>test classes</em> which subclass <code><a href='../sys/Test.html'>sys::Test</a></code></li>

<li>Write <em>test methods</em> which start with "test"</li>

<li>Assert <em>test conditions</em> via the "verifyXXX" methods</li>

<li>Run the tests the <code>fant</code> command line tool</li>
</ul>

<h1 id='organizing'>Organizing Tests </h1>

<p>By convention test classes are organized directly within their associated pod using the following directory structure:</p>

<pre>myPod/
  build.fan
  fan/
    ClassA.fan
    ClassB.fan
  test/
    TestClassA.fan
    TestClassB.fan</pre>

<h1 id='writing'>Writing Tests </h1>

<p>Any concrete class within a pod which extends from <code><a href='../sys/Test.html'>sys::Test</a></code> is considered a <em>test class</em>.  Any method which starts with "test" in a test class is considered a <em>test method</em>.  Test methods must be public instance methods with no parameters.  Test methods assert conditions using the <em>verify</em> methods.  Three of the most commonly used verify methods:</p>

<ul>
<li><code><a href='../sys/Test.html#verify'>verify</a></code>: assert a boolean condition is true</li>

<li><code><a href='../sys/Test.html#verifyEq'>verifyEq</a></code>: assert two objects are equal</li>

<li><code><a href='../sys/Test.html#verifyErr'>verifyErr</a></code>: assert an exception is thrown</li>
</ul>

<p>Here is an example of a test class:</p>

<pre>class SampleTest : Test
{
  Void testStuff()
  {
    verify('A'.isUpper)
    verifyEq('A'.lower, 'a')
    verifyErr(ParseErr#) { Int.fromStr("@#!") }
  }
}</pre>

<h1 id='running'>Running Tests </h1>

<p>The <code>fant</code> launcher is used to run tests.  You can pass a pod name, type qname, or slot qname to run any test in any installed pod.  You can also pass "-all" to run all tests in all pods:</p>

<pre>fant -all
fant testSys
fant testSys::StrTest
fant testSys::StrTest.testEach</pre>

<p>The test results will be printed to standard out.  Any test failures will be raised as exceptions.</p>

<h1 id='lifecycle'>Test Lifecycle </h1>

<p>When running tests, each test method is executed as follows:</p>

<ol style='list-style-type:decimal'>
<li>A fresh instance of the test class is instantiated via <code>make</code></li>

<li><code><a href='../sys/Test.html#setup'>Test.setup</a></code> is called</li>

<li>The test method is called with no arguments</li>

<li>Any exceptions raised are trapped and the test is marked failed</li>

<li><code><a href='../sys/Test.html#teardown'>Test.teardown</a></code> is guaranteed to be called</li>
</ol>

<p>Any exception raised by the test method is considered a failure. Calls to <code>verify</code> which fail will just raise an exception.</p>
<div class='prevNext'>
<div class='prev'><a href='Fansh.html'><img src='../go-previous.png' alt='prev' /></a> <a href='Fansh.html'>Fansh</a></div>
<div class='next'><a href='Fanp.html'>Fanp</a> <a href='Fanp.html'><img src='../go-next.png' alt='next' /></a></div>
</div>
</div>
<div class='sidebar'>
<h2>Contents</h2>
<ul>
<li><a href='#overview'>Overview </a></li><li><a href='#organizing'>Organizing Tests </a></li><li><a href='#writing'>Writing Tests </a></li><li><a href='#running'>Running Tests </a></li><li><a href='#lifecycle'>Test Lifecycle </a></li></ul>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
docTools 1.0.56
[11-Nov-2010 Thu 10:08:29AM EST]
</p>
</div>
</div>
</body>
</html>
