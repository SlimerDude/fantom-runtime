<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>web::FileWeblet</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>web</a></li>
  <li>&gt;</li>
  <li><a href='FileWeblet.html'>FileWeblet</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='type'>
<div class='overview'>
<h2>class</h2>
<h1>web::FileWeblet</h1>
<pre><a href='../sys/Obj.html'>sys::Obj</a>
  web::FileWeblet : <a href='Weblet.html'>web::Weblet</a></pre>
</div>
<div class='detail'>

<p>FileWeblet is used to service an HTTP request on a <code><a href='../sys/File.html'>sys::File</a></code>. It handles all the dirty details for cache control, modification time, ETags, etc.</p>

<p>Current implementation supports ETags and Modification time for cache validation.  It does not specify any cache control directives.</p>
</div>
</div>
<div class='slots'>
<div class='detail'>
<h2>Slots</h2>
<dl>
<dt id='checkNotModified' class='method'>checkNotModified<a href='FileWeblet_src.html#checkNotModified'>Source</a></dt>
<dd>
<p><code class='sig'>virtual protected <a href='../sys/Bool.html'>Bool</a> checkNotModified()</code></p>

<p>Check if the request passed headers indicating it has cached version of the file.  If the file has not been modified, then service the request as 304 and return true.  This method supports ETag "If-None-Match" and "If-Modified-Since" modification time.</p>
</dd>
<dt id='etag' class='method'>etag<a href='FileWeblet_src.html#etag'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='../sys/Str.html'>Str</a> etag()</code></p>

<p>Compute the ETag for the file being serviced which uniquely identifies the file version.  The default implementation is a hash of the modified time and the file size.  The result of this method must conform to the ETag syntax and be wrapped in quotes.</p>
</dd>
<dt id='file' class='field'>file<a href='FileWeblet_src.html#file'>Source</a></dt>
<dd>
<p><code class='sig'>const <a href='../sys/File.html'>File</a> file</code></p>

<p>The file being serviced by this FileWeblet.</p>
</dd>
<dt id='make' class='method'>make<a href='FileWeblet_src.html#make'>Source</a></dt>
<dd>
<p><code class='sig'>new make(<a href='../sys/File.html'>File</a> file)</code></p>

<p>Constructor with file to service.</p>
</dd>
<dt id='modified' class='method'>modified<a href='FileWeblet_src.html#modified'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='../sys/DateTime.html'>DateTime</a> modified()</code></p>

<p>Get the modified time of the file floored to 1 second which is the most precise that HTTP can deal with.</p>
</dd>
<dt id='onGet' class='method'>onGet<a href='FileWeblet_src.html#onGet'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='../sys/Void.html'>Void</a> onGet()</code></p>
<div class='slotInfo'>
<p>Overrides <a href='Weblet.html#onGet'>web::Weblet.onGet</a></p>
</div>

<p>Handle GET request for the file.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class='sidebar'>
<h2>Type</h2>
<ul class='clean'>
  <li><a href='FileWeblet_src.html'>View Source</a></li>
  <li><a href='#' onclick='ShowSlots.toggle(event); return false;'>Show All Slots</a></li>
</ul>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li><a href='#checkNotModified'>checkNotModified</a></li>
  <li><a href='#etag'>etag</a></li>
  <li><a href='#file'>file</a></li>
  <li><a href='#make'>make</a></li>
  <li><a href='#modified'>modified</a></li>
  <li><a href='#onGet'>onGet</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
web 1.0.56
[11-Nov-2010 Thu 10:08:20AM EST]
</p>
</div>
</div>
</body>
</html>
