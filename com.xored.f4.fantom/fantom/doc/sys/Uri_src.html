<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>sys::Uri</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>sys</a></li>
  <li>&gt;</li>
  <li><a href='Uri.html'>Uri</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='type'>
<div class='overview'>
<h2>const final class</h2>
<h1>sys::Uri</h1>
<pre><a href='Obj.html'>sys::Obj</a>
  sys::Uri</pre>
</div>
</div>
<div class='src'>
<pre>
<span class='y'>//</span>
<span class='y'>// Copyright (c) 2006, Brian Frank and Andy Frank</span>
<span class='y'>// Licensed under the Academic Free License version 3.0</span>
<span class='y'>//</span>
<span class='y'>// History:</span>
<span class='y'>//   28 Jun 06  Brian Frank  Creation</span>
<span class='y'>//</span>

<span class='z'>**</span>
<span class='z'>** Uri is used to immutably represent a Universal Resource Identifier</span>
<span class='z'>** according to [RFC 3986]`http://tools.ietf.org/html/rfc3986`.</span>
<span class='z'>** The generic format for a URI is:</span>
<span class='z'>**</span>
<span class='z'>**   &lt;uri&gt;        := [&lt;scheme&gt; ":"] &lt;body&gt;</span>
<span class='z'>**   &lt;body&gt;       := ["//" &lt;auth&gt;] ["/" &lt;path&gt;] ["?" &lt;query&gt;] ["#" &lt;frag&gt;]</span>
<span class='z'>**   &lt;auth&gt;       := [&lt;userInfo&gt; "@"] &lt;host&gt; [":" &lt;port&gt;]</span>
<span class='z'>**   &lt;path&gt;       := &lt;name&gt; ("/" &lt;name&gt;)*</span>
<span class='z'>**   &lt;name&gt;       := &lt;basename&gt; ["." &lt;ext&gt;]</span>
<span class='z'>**   &lt;query&gt;      := &lt;queryPair&gt; (&lt;querySep&gt; &lt;queryPair&gt;)*</span>
<span class='z'>**   &lt;querySep&gt;   := "&amp;" | ";"</span>
<span class='z'>**   &lt;queryPair&gt;  := &lt;queryKey&gt; ["=" &lt;queryVal&gt;]</span>
<span class='z'>**   &lt;gen-delims&gt; := ":" / "/" / "?" / "#" / "[" / "]" / "@"</span>
<span class='z'>**</span>
<span class='z'>** Uris are expressed in the following forms:</span>
<span class='z'>**   - Standard Form: any char allowed, general delimiters are "\" escaped</span>
<span class='z'>**   - Encoded Form: '%HH' percent encoded</span>
<span class='z'>**</span>
<span class='z'>** In standard form the full range of Unicode characters is allowed in all</span>
<span class='z'>** sections except the general delimiters which separate sections.  For</span>
<span class='z'>** example '?' is barred in any section before the query, but is permissible</span>
<span class='z'>** in the query string itself or the fragment identifier.  The scheme must</span>
<span class='z'>** be strictly defined in terms of ASCII alphanumeric, ".", "+", or "-".</span>
<span class='z'>** Any general delimiter used outside of its normal role, must be</span>
<span class='z'>** escaped using the "\" backslash character.  The backslash itself is</span>
<span class='z'>** escaped as "\\".  For example a filename with the "#" character is</span>
<span class='z'>** represented as "file \#2".  Only the path, query, and fragment sections</span>
<span class='z'>** can use escaped general delimiters; the scheme and authority sections</span>
<span class='z'>** cannot use escaped general delimters.</span>
<span class='z'>**</span>
<span class='z'>** Encoded form as defined by RFC 3986 uses a stricter set of rules for</span>
<span class='z'>** the characters allowed in each section of the URI (scheme, userInfo,</span>
<span class='z'>** host, path, query, and fragment).  Any character outside of the</span>
<span class='z'>** allowed set is UTF-8 encoded into octets and '%HH' percent encoded.</span>
<span class='z'>** The encoded form should be used when working with external applications</span>
<span class='z'>** such as HTTP, HTML, or XML.</span>
<span class='z'>**</span>
<span class='z'>** The Uri API is designed to work with the standard form of the Uri.</span>
<span class='z'>** Access methods like `host`, `pathStr`, or `queryStr` all use standard</span>
<span class='z'>** form.  To summarize different ways of working with Uri:</span>
<span class='z'>**   - `Uri.fromStr`:  parses a string from its standard form</span>
<span class='z'>**   - `Uri.toStr`:    returns the standard form</span>
<span class='z'>**   - `Uri.decode`:   parses a string from percent encoded form</span>
<span class='z'>**   - `Uri.encode`:   translate into percent encoded form</span>
<span class='z'>**</span>
<span class='z'>** Uri can be used to model either absolute URIs or relative references.</span>
<span class='z'>** The `plus` and `relTo` methods can be used to resolve and relativize</span>
<span class='z'>** relative references against a base URI.</span>
<span class='z'>**</span>
@Serializable <span class='b'>{</span> simple = <span class='k'>true</span> <span class='b'>}</span>
<span class='k'>const</span> <span class='k'>final</span> <span class='k'>class</span> Uri
<span class='b'>{</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Constructor</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>**</span>
  <span class='z'>** Parse the specified string into a Uri.  If invalid format</span>
  <span class='z'>** and checked is false return null,  otherwise throw ParseErr.</span>
  <span class='z'>** a standard form Unicode string into its generic parts.</span>
  <span class='z'>** It does not unescape '%' or '+' and handles normal Unicode</span>
  <span class='z'>** characters in the string.  If general delimiters such</span>
  <span class='z'>** as the "?" or "#" characters are used outside their normal</span>
  <span class='z'>** role, then they must be backslash escaped.</span>
  <span class='z'>**</span>
  <span class='z'>** All Uris are automatically normalized as follows:</span>
  <span class='z'>**   - Replacing "." and ".." segments in the middle of a path</span>
  <span class='z'>**   - Scheme always normalizes to lowercase</span>
  <span class='z'>**   - If http then port 80 normalizes to null</span>
  <span class='z'>**   - If http then a null path normalizes to /</span>
  <span class='z'>**</span>
  <span class='k'>static</span> Uri? <span id='fromStr'>fromStr</span><span class='b'>(</span>Str s, Bool checked := <span class='k'>true</span><span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Parse an ASCII percent encoded string into a Uri according to</span>
  <span class='z'>** RFC 3986.  All '%HH' escape sequences are translated into octects,</span>
  <span class='z'>** and then the octect sequence is UTF-8 decoded into a Str.  The '+'</span>
  <span class='z'>** character in the query section is unescaped into a space.  If</span>
  <span class='z'>** checked if true then throw ParseErr if the string is a malformed</span>
  <span class='z'>** URI or if not encoded correctly, otherwise return null. Refer</span>
  <span class='z'>** to `fromStr` for normalization rules.</span>
  <span class='z'>**</span>
  <span class='k'>static</span> Uri? <span id='decode'>decode</span><span class='b'>(</span>Str s, Bool checked := <span class='k'>true</span><span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Default value is '``'.</span>
  <span class='z'>**</span>
  <span class='k'>static</span> <span class='k'>const</span> Uri <span id='defVal'>defVal</span>

  <span class='z'>**</span>
  <span class='z'>** Private constructor</span>
  <span class='z'>**</span>
  <span class='k'>private</span> <span class='k'>new</span> <span id='privateMake'>privateMake</span><span class='b'>()</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Utils</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>**</span>
  <span class='z'>** Decode a map of query parameters which are URL encoded according</span>
  <span class='z'>** to the "application/x-www-form-urlencoded" MIME type.  This method</span>
  <span class='z'>** will unescape '%' percent encoding and '+' into space.  The parameters</span>
  <span class='z'>** are parsed into map using the same semantics as `Uri.query`.  Throw</span>
  <span class='z'>** ArgErr is the string is malformed.  See `encodeQuery`.</span>
  <span class='z'>**</span>
  <span class='k'>static</span> Str:Str <span id='decodeQuery'>decodeQuery</span><span class='b'>(</span>Str s<span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Encode a map of query parameters into URL percent encoding</span>
  <span class='z'>** according to the "application/x-www-form-urlencoded" MIME type.</span>
  <span class='z'>** See `decodeQuery`.</span>
  <span class='z'>**</span>
  <span class='k'>static</span> Str <span id='encodeQuery'>encodeQuery</span><span class='b'>(</span>Str:Str q<span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Return if the specified string is an valid name segment to</span>
  <span class='z'>** use in an unencoded URI.  The name must be at least one char</span>
  <span class='z'>** long and can never be "." or "..".  The legal characters are</span>
  <span class='z'>** defined by as follows from RFC 3986:</span>
  <span class='z'>**</span>
  <span class='z'>**   unreserved  =  ALPHA / DIGIT / "-" / "." / "_" / "~"</span>
  <span class='z'>**   ALPHA       =  %x41-5A / %x61-7A   ; A-Z / a-z</span>
  <span class='z'>**   DIGIT       =  %x30-39 ; 0-9</span>
  <span class='z'>**</span>
  <span class='z'>** Although RFC 3986 does allow path segments to contain other</span>
  <span class='z'>** special characters such as 'sub-delims', Fantom takes a strict</span>
  <span class='z'>** approach to names to be used in URIs.</span>
  <span class='z'>**</span>
  <span class='k'>static</span> Bool <span id='isName'>isName</span><span class='b'>(</span>Str name<span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** If the specified string is not a valid name according</span>
  <span class='z'>** to the `isName` method, then throw `NameErr`.</span>
  <span class='z'>**</span>
  <span class='k'>static</span> Void <span id='checkName'>checkName</span><span class='b'>(</span>Str name<span class='b'>)</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Identity</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>**</span>
  <span class='z'>** Two Uris are equal if they have same string normalized representation.</span>
  <span class='z'>**</span>
  <span class='k'>override</span> Bool <span id='equals'>equals</span><span class='b'>(</span>Obj? that<span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Return a hash code based on the normalized string representation.</span>
  <span class='z'>**</span>
  <span class='k'>override</span> Int <span id='hash'>hash</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return normalized string representation.</span>
  <span class='z'>**</span>
  <span class='k'>override</span> Str <span id='toStr'>toStr</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return `toStr`.  This method is used to enable 'toLocale' to</span>
  <span class='z'>** be used with duck typing across most built-in types.</span>
  <span class='z'>**</span>
  Str <span id='toLocale'>toLocale</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return the percent encoded string for this Uri according to</span>
  <span class='z'>** RFC 3986.  Each section of the Uri is UTF-8 encoded into octects</span>
  <span class='z'>** and then percent encoded according to its valid character set.</span>
  <span class='z'>** Spaces in the query section are encoded as '+'.</span>
  <span class='z'>**</span>
  Str <span id='encode'>encode</span><span class='b'>()</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Components</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>**</span>
  <span class='z'>** Return if an absolute Uri which means it has a non-null scheme.</span>
  <span class='z'>**</span>
  Bool <span id='isAbs'>isAbs</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return if a relative Uri which means it has a null scheme.</span>
  <span class='z'>**</span>
  Bool <span id='isRel'>isRel</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** A Uri represents a directory if it has a non-null path which</span>
  <span class='z'>** ends with a "/" slash.  Directories are joined with other Uris</span>
  <span class='z'>** relative to themselves versus non-directories which are joined</span>
  <span class='z'>** relative to their parent.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `/a/b`.isDir   =&gt;  false</span>
  <span class='z'>**   `/a/b/`.isDir  =&gt;  true</span>
  <span class='z'>**   `/a/?q`.isDir  =&gt;  true</span>
  <span class='z'>**</span>
  Bool <span id='isDir'>isDir</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return the scheme component or null if not absolute.  The</span>
  <span class='z'>** scheme is always normalized into lowercase.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://foo/a/b/c`.scheme      =&gt;  "http"</span>
  <span class='z'>**   `HTTP://foo/a/b/c`.scheme      =&gt;  "http"</span>
  <span class='z'>**   `mailto:who@there.com`.scheme  =&gt;  "mailto"</span>
  <span class='z'>**</span>
  Str? <span id='scheme'>scheme</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** The authority represents a network endpoint in the format:</span>
  <span class='z'>**   [&lt;userInfo&gt; "@"] host [":" &lt;port&gt;]</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://user@host:99/`.auth  =&gt;  "user@host:99"</span>
  <span class='z'>**   `http://host/`.auth          =&gt;  "host"</span>
  <span class='z'>**   `/dir/file.txt`.auth         =&gt;  null</span>
  <span class='z'>**</span>
  Str? <span id='auth'>auth</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return the host address of the URI or null if not available.  The</span>
  <span class='z'>** host is in the format of a DNS name, IPv4 address, or IPv6 address</span>
  <span class='z'>** surrounded by square brackets.  Return null if the uri is not</span>
  <span class='z'>** absolute.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `ftp://there:78/file`.host            =&gt;  "there"</span>
  <span class='z'>**   `http://www.cool.com/`.host           =&gt;  "www.cool.com"</span>
  <span class='z'>**   `http://user@10.162.255.4/index`.host =&gt;  "10.162.255.4"</span>
  <span class='z'>**   `http://[::192.9.5.5]/`.host          =&gt;  "[::192.9.5.5]"</span>
  <span class='z'>**   `//foo/bar`.host                      =&gt;  "foo"</span>
  <span class='z'>**   `/bar`.host                           =&gt;  null</span>
  <span class='z'>**</span>
  Str? <span id='host'>host</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** User info is string information embedded in the authority using</span>
  <span class='z'>** the "@" character.  Its use is discouraged for security reasons.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://brian:pass@host/`.userInfo  =&gt;  "brian:pass"</span>
  <span class='z'>**   `http://www.cool.com/`.userInfo     =&gt;  null</span>
  <span class='z'>**</span>
  Str? <span id='userInfo'>userInfo</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return the IP port of the host for the network end point.  It is optionally</span>
  <span class='z'>** embedded in the authority using the ":" character.  If unspecified then</span>
  <span class='z'>** return null.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://foo:81/`.port        =&gt;  81</span>
  <span class='z'>**   `http://www.cool.com/`.port  =&gt;  null</span>
  <span class='z'>**</span>
  Int? <span id='port'>port</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return the path parsed into a list of simple names or</span>
  <span class='z'>** an empty list if the pathStr is "" or "/".  Any general</span>
  <span class='z'>** delimiters in the path such "?" or "#" are backslash</span>
  <span class='z'>** escaped.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `mailto:me@there.com`  =&gt;  ["me@there.com"]</span>
  <span class='z'>**   `http://host`.path     =&gt;  Str[,]</span>
  <span class='z'>**   `http://foo/`.path     =&gt;  Str[,]</span>
  <span class='z'>**   `/`.path               =&gt;  Str[,]</span>
  <span class='z'>**   `/a`.path              =&gt;  ["a"]</span>
  <span class='z'>**   `/a/b`.path            =&gt;  ["a", "b"]</span>
  <span class='z'>**   `../a/b`.path          =&gt;  ["..", "a", "b"]</span>
  <span class='z'>**</span>
  Str<span class='b'>[]</span> <span id='path'>path</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return the path component of the Uri.  Any general</span>
  <span class='z'>** delimiters in the path such "?" or "#" are backslash</span>
  <span class='z'>** escaped.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `mailto:me@there.com`  =&gt;  "me@there.com"</span>
  <span class='z'>**   `http://host`          =&gt;  ""</span>
  <span class='z'>**   `http://foo/`.pathStr  =&gt;  "/"</span>
  <span class='z'>**   `/a`.pathStr           =&gt;  "/a"</span>
  <span class='z'>**   `/a/b`.pathStr         =&gt;  "/a/b"</span>
  <span class='z'>**   `../a/b`.pathStr       =&gt;  "../a/b"</span>
  <span class='z'>**</span>
  Str <span id='pathStr'>pathStr</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return if the path starts with a leading slash.  If</span>
  <span class='z'>** pathStr is null, then return false.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://foo/`.isPathAbs    =&gt;  true</span>
  <span class='z'>**   `/dir/f.txt`.isPathAbs     =&gt;  true</span>
  <span class='z'>**   `dir/f.txt`.isPathAbs      =&gt;  false</span>
  <span class='z'>**   `../index.html`.isPathAbs  =&gt;  false</span>
  <span class='z'>**</span>
  Bool <span id='isPathAbs'>isPathAbs</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return if this Uri contains only a path component.  The</span>
  <span class='z'>** authority (scheme, host, port), query, and fragment must</span>
  <span class='z'>** be null.</span>
  <span class='z'>**</span>
  Bool <span id='isPathOnly'>isPathOnly</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return simple file name which is path.last or ""</span>
  <span class='z'>** if the path is empty.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `/`.name            =&gt;  ""</span>
  <span class='z'>**   `/a/file.txt`.name  =&gt;  "file.txt"</span>
  <span class='z'>**   `/a/file`.name      =&gt;  "file"</span>
  <span class='z'>**   `somedir/`.name     =&gt;  "somedir"</span>
  <span class='z'>**</span>
  Str <span id='name'>name</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return file name without the extension (everything up</span>
  <span class='z'>** to the last dot) or "" if name is "".</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `/`.basename            =&gt;  ""</span>
  <span class='z'>**   `/a/file.txt`.basename  =&gt;  "file"</span>
  <span class='z'>**   `/a/file`.basename      =&gt;  "file"</span>
  <span class='z'>**   `/a/file.`.basename     =&gt;  "file"</span>
  <span class='z'>**   `..`.basename           =&gt;  ".."</span>
  <span class='z'>**</span>
  Str <span id='basename'>basename</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return file name extension (everything after the last dot)</span>
  <span class='z'>** or null if name is null or name has no dot.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `/`.ext            =&gt;  null</span>
  <span class='z'>**   `/a/file.txt`.ext  =&gt;  "txt"</span>
  <span class='z'>**   `/Foo.Bar`.ext     =&gt;  "Bar"</span>
  <span class='z'>**   `/a/file`.ext      =&gt;  null</span>
  <span class='z'>**   `/a/file.`.ext     =&gt;  ""</span>
  <span class='z'>**   `..`.ext           =&gt;  null</span>
  <span class='z'>**</span>
  Str? <span id='ext'>ext</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return the MimeType mapped by the `ext` or null if</span>
  <span class='z'>** no mapping.  If this uri is to a directory, then</span>
  <span class='z'>** "x-directory/normal" is returned.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `file.txt`  =&gt;  text/plain</span>
  <span class='z'>**   `somefile`  =&gt;  null</span>
  <span class='z'>**</span>
  MimeType? <span id='mimeType'>mimeType</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return the query parsed as a map of key/value pairs.  If no query</span>
  <span class='z'>** string was specified return an empty map (this method will never</span>
  <span class='z'>** return null).  The query is parsed such that pairs are separated by</span>
  <span class='z'>** the "&amp;" or ";" characters.  If a pair contains the "=", then</span>
  <span class='z'>** it is split into a key and value, otherwise the value defaults</span>
  <span class='z'>** to "true".  If delimiters such as "&amp;", "=", or ";" are in the</span>
  <span class='z'>** keys or values, then they are *not* escaped.  If duplicate keys</span>
  <span class='z'>** are detected, then the values are concatenated together with a</span>
  <span class='z'>** comma.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://host/path?query`.query  =&gt;  ["query":"true"]</span>
  <span class='z'>**   `http://host/path`.query        =&gt;  [:]</span>
  <span class='z'>**   `?a=b;c=d`.query                =&gt;  ["a":"b", "c":"d"]</span>
  <span class='z'>**   `?a=b&amp;c=d`.query                =&gt;  ["a":"b", "c":"d"]</span>
  <span class='z'>**   `?a=b;;c=d;`.query              =&gt;  ["a":"b", "c":"d"]</span>
  <span class='z'>**   `?a=b;;c`.query                 =&gt;  ["a":"b", "c":"true"]</span>
  <span class='z'>**   `?x=1&amp;x=2&amp;x=3`.query            =&gt;  ["x":"1,2,3"]</span>
  <span class='z'>**</span>
  Str:Str <span id='query'>query</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return the query component of the Uri which is everything</span>
  <span class='z'>** after the "?" but before the "#" fragment.  Return null if</span>
  <span class='z'>** no query string specified.  Any delimiters used in keys</span>
  <span class='z'>** or values such as "&amp;", "=", or ";" are backslash escaped.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://host/path?query#frag`.queryStr =&gt;  "query"</span>
  <span class='z'>**   `http://host/path?query`.queryStr      =&gt;  "query"</span>
  <span class='z'>**   `http://host/path`.queryStr            =&gt;  null</span>
  <span class='z'>**   `../foo?a=b&amp;c=d`.queryStr              =&gt;  "a=b&amp;c=d"</span>
  <span class='z'>**   `?a=b;c;`.queryStr                     =&gt;  "a=b;c;"</span>
  <span class='z'>**</span>
  Str? <span id='queryStr'>queryStr</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return the fragment component of the Uri which is everything</span>
  <span class='z'>** after the "#".  Return null if no fragment specified.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://host/path?query#frag`.frag  =&gt;  "frag"</span>
  <span class='z'>**   `http://host/path`                  =&gt;  null</span>
  <span class='z'>**   `#h1`                               =&gt;  "h1"</span>
  <span class='z'>**</span>
  Str? <span id='frag'>frag</span><span class='b'>()</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Utils</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>**</span>
  <span class='z'>** Return the parent directory of this Uri or null if a parent</span>
  <span class='z'>** path cannot be computed from this Uri.  If the path is not</span>
  <span class='z'>** empty, then this method is equivalent to 'slice(0..-2)'.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://foo/a/b/c?q#f`.parent  =&gt;  `http://foo/a/b/`</span>
  <span class='z'>**   `/a/b/c/`.parent  =&gt;  `/a/b/`)</span>
  <span class='z'>**   `a/b/c`.parent    =&gt;  `a/b/`</span>
  <span class='z'>**   `/a`.parent       =&gt;   `/`</span>
  <span class='z'>**   `/`.parent        =&gt;   null</span>
  <span class='z'>**   `a.txt`.parent    =&gt;   null</span>
  <span class='z'>**</span>
  Uri? <span id='parent'>parent</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return a new Uri with only a path part.  If this Uri has</span>
  <span class='z'>** an authority, fragment, or query they are stripped off.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://host/a/b/c?query`.pathOnly =&gt;  `/a/b/c`</span>
  <span class='z'>**   `http://host/a/b/c/`.pathOnly      =&gt;  `/a/b/c/`</span>
  <span class='z'>**   `/a/b/c`.pathOnly                  =&gt;  `/a/b/c`</span>
  <span class='z'>**   `file.txt`.pathOnly                =&gt;  `file.txt`</span>
  <span class='z'>**</span>
  Uri <span id='pathOnly'>pathOnly</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Return a new Uri based on a slice of this Uri's path.  If the</span>
  <span class='z'>** range starts at zero, then the authority is included otherwise</span>
  <span class='z'>** it is stripped and the result is not path absolute.  If the</span>
  <span class='z'>** range includes the last name in the path, then the query and</span>
  <span class='z'>** fragment are included otherwise they are stripped and the result</span>
  <span class='z'>** includes a trailing slash.  The range can include negative indices</span>
  <span class='z'>** to access from the end of the path.  Also see `pathOnly` to create</span>
  <span class='z'>** a slice without the authority, query, or fragment.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://host/a/b/c?q`[0..-1]  =&gt;  `http://host/a/b/c?q`</span>
  <span class='z'>**   `http://host/a/b/c?q`[0..-2]  =&gt;  `http://host/a/b/`</span>
  <span class='z'>**   `http://host/a/b/c?q`[0..-3]  =&gt;  `http://host/a/`</span>
  <span class='z'>**   `http://host/a/b/c?q`[0..-4]  =&gt;  `http://host/`</span>
  <span class='z'>**   `http://host/a/b/c?q`[1..-1]  =&gt;  `b/c?q`</span>
  <span class='z'>**   `http://host/a/b/c?q`[2..-1]  =&gt;  `c?q`</span>
  <span class='z'>**   `http://host/a/b/c?q`[3..-1]  =&gt;  `?q`</span>
  <span class='z'>**   `/a/b/c/`[0..1]               =&gt;  `/a/b/`</span>
  <span class='z'>**   `/a/b/c/`[0..0]               =&gt;  `/a/`</span>
  <span class='z'>**   `/a/b/c/`[1..2]               =&gt;  `b/c/`</span>
  <span class='z'>**   `/a/b/c/`[1..&lt;2]              =&gt;  `b/`</span>
  <span class='z'>**   `/a`[0..-2]                   =&gt;  `/`</span>
  <span class='z'>**</span>
  @Operator Uri <span id='getRange'>getRange</span><span class='b'>(</span>Range r<span class='b'>)</span>

  <span class='z'>** TODO: use `getRange`</span>
  @Deprecated Uri <span id='slice'>slice</span><span class='b'>(</span>Range r<span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Return a slice of this Uri's path using the same semantics</span>
  <span class='z'>** as `slice`.  However this method ensures that the result has</span>
  <span class='z'>** a leading slash in the path such that `isPathAbs` returns true.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `/a/b/c/`.getRangeToPathAbs(0..1)  =&gt;  `/a/b/`</span>
  <span class='z'>**   `/a/b/c/`.getRangeToPathAbs(1..2)  =&gt;  `/b/c/`</span>
  <span class='z'>**   `/a/b/c/`.getRangeToPathAbs(1..&lt;2) =&gt;  `/b/`</span>
  <span class='z'>**</span>
  Uri <span id='getRangeToPathAbs'>getRangeToPathAbs</span><span class='b'>(</span>Range r<span class='b'>)</span>

  <span class='z'>** TODO: use `getRangeToPathAbs`</span>
  @Deprecated Uri <span id='sliceToPathAbs'>sliceToPathAbs</span><span class='b'>(</span>Range r<span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Return a new Uri with the specified Uri appended to this Uri.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://foo/path` + `http://bar/`  =&gt;  `http://bar/`</span>
  <span class='z'>**   `http://foo/path?q#f` + `newpath`  =&gt;  `http://foo/newpath`</span>
  <span class='z'>**   `http://foo/path/?q#f` + `newpath` =&gt;  `http://foo/path/newpath`</span>
  <span class='z'>**   `a/b/c`  + `d`                     =&gt;  `a/b/d`</span>
  <span class='z'>**   `a/b/c/` + `d`                     =&gt;  `a/b/c/d`</span>
  <span class='z'>**   `a/b/c`  + `../../d`               =&gt;  `d`</span>
  <span class='z'>**   `a/b/c/` + `../../d`               =&gt;  `a/d`</span>
  <span class='z'>**   `a/b/c`  + `../../../d`            =&gt;  `../d`</span>
  <span class='z'>**   `a/b/c/` + `../../../d`            =&gt;  `d`</span>
  <span class='z'>**</span>
  @Operator Uri <span id='plus'>plus</span><span class='b'>(</span>Uri toAppend<span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Return a new Uri with a single path name appended to this</span>
  <span class='z'>** Uri.  If asDir is true, then add a trailing slash to the Uri</span>
  <span class='z'>** to make it a directory Uri.  This method is potentially</span>
  <span class='z'>** much more efficient than using `plus` when appending a</span>
  <span class='z'>** single name.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `dir/`.plusName("foo")        =&gt;  `dir/foo`</span>
  <span class='z'>**   `dir/`.plusName("foo", true)  =&gt;  `dir/foo/`</span>
  <span class='z'>**   `/dir/file`.plusName("foo")   =&gt;  `/dir/foo`</span>
  <span class='z'>**   `/dir/#frag`.plusName("foo")  =&gt;  `/dir/foo`</span>
  <span class='z'>**</span>
  Uri <span id='plusName'>plusName</span><span class='b'>(</span>Str name, Bool asDir := <span class='k'>false</span><span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Add a trailing slash to the path string of this Uri</span>
  <span class='z'>** to make it a directory Uri.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples</span>
  <span class='z'>**   `http://h/dir`.plusSlash  =&gt; `http://h/dir/`</span>
  <span class='z'>**   `/a`.plusSlash            =&gt;  `/a/`</span>
  <span class='z'>**   `/a/`.plusSlash           =&gt;  `/a/`</span>
  <span class='z'>**   `/a/b`.plusSlash          =&gt;  `/a/b/`</span>
  <span class='z'>**   `/a?q`.plusSlash          =&gt;  `/a/?q`</span>
  <span class='z'>**</span>
  Uri <span id='plusSlash'>plusSlash</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Add the specified query key/value pairs to this Uri.</span>
  <span class='z'>** If this uri has an existing query, then it is merged</span>
  <span class='z'>** with the given query.  The key/value pairs should not</span>
  <span class='z'>** be backslash escaped or percent encoded.  If the query</span>
  <span class='z'>** param is null or empty, return this instance.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://h/`.plusQuery(["k":"v"])         =&gt;  `http://h/?k=v`</span>
  <span class='z'>**   `http://h/?k=old`.plusQuery(["k":"v"])   =&gt;  `http://h/?k=v`</span>
  <span class='z'>**   `/foo?a=b`.plusQuery(["k":"v"])          =&gt;  `/foo?a=b&amp;k=v`</span>
  <span class='z'>**   `?a=b`.plusQuery(["k1":"v1", "k2":"v2"]) =&gt;  `?a=b&amp;k1=v1&amp;k2=v2`</span>
  <span class='z'>**</span>
  Uri <span id='plusQuery'>plusQuery</span><span class='b'>([</span>Str:Str<span class='b'>]</span>? query<span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Relativize this uri against the specified base.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://foo/a/b/c`.relTo(`http://foo/a/b/c`) =&gt; ``</span>
  <span class='z'>**   `http://foo/a/b/c`.relTo(`http://foo/a/b`)   =&gt; `c`</span>
  <span class='z'>**   `/a/b/c`.relTo(`/a`)                         =&gt; `b/c`</span>
  <span class='z'>**   `a/b/c`.relTo(`/a`)                          =&gt; `b/c`</span>
  <span class='z'>**   `/a/b/c?q`.relTo(`/`)                        =&gt; `a/b/c?q`</span>
  <span class='z'>**   `/a/x`.relTo(`/a/b/c`)                       =&gt; `../x`</span>
  <span class='z'>**</span>
  Uri <span id='relTo'>relTo</span><span class='b'>(</span>Uri base<span class='b'>)</span>

  <span class='z'>**</span>
  <span class='z'>** Relativize this uri against its authority.  This method</span>
  <span class='z'>** strips the authority if present and keeps the path, query,</span>
  <span class='z'>** and fragment segments.</span>
  <span class='z'>**</span>
  <span class='z'>** Examples:</span>
  <span class='z'>**   `http://host/a/b/c?q#frag`.relToAuth  =&gt; `/a/b/c?q#frag`</span>
  <span class='z'>**   `http://host/a/b/c`.relToAuth         =&gt; `/a/b/c`</span>
  <span class='z'>**   `http://user@host/index`.relToAuth    =&gt; `/index`</span>
  <span class='z'>**   `mailto:bob@bob.net`.relToAuth        =&gt; `bob@bob.net`</span>
  <span class='z'>**   `/a/b/c/`.relToAuth                   =&gt; `/a/b/c/`</span>
  <span class='z'>**   `logo.png`.relToAuth                  =&gt; `logo.png`</span>
  <span class='z'>**</span>
  Uri <span id='relToAuth'>relToAuth</span><span class='b'>()</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Resolution</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>**</span>
  <span class='z'>** Convenience for File.make(this) - no guarantee is made</span>
  <span class='z'>** that the file exists.</span>
  <span class='z'>**</span>
  File <span id='toFile'>toFile</span><span class='b'>()</span>

  <span class='z'>**</span>
  <span class='z'>** Resolve this Uri into an Fantom object.</span>
  <span class='z'>** See [docLang]`docLang::Naming#resolving` for the resolve process.</span>
  <span class='z'>**</span>
  Obj? <span id='get'>get</span><span class='b'>(</span>Obj? base := <span class='k'>null</span>, Bool checked := <span class='k'>true</span><span class='b'>)</span>

<span class='y'>//////////////////////////////////////////////////////////////////////////</span>
<span class='y'>// Conversion</span>
<span class='y'>//////////////////////////////////////////////////////////////////////////</span>

  <span class='z'>**</span>
  <span class='z'>** Get this Uri as a Fantom code literal.  This method will</span>
  <span class='z'>** escape the "$" interpolation character.</span>
  <span class='z'>**</span>
  Str <span id='toCode'>toCode</span><span class='b'>()</span>

<span class='b'>}</span></pre>
</div>
</div>
<div class='sidebar'>
<h2>More Info</h2>
<ul class='clean'>
  <li><a href='Uri.html'>View Fandoc</a></li>
</ul>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li style='display: block;'><a href='#auth'>auth</a></li>
  <li style='display: block;'><a href='#basename'>basename</a></li>
  <li style='display: block;'><a href='#checkName'>checkName</a></li>
  <li style='display: block;'><a href='#decode'>decode</a></li>
  <li style='display: block;'><a href='#decodeQuery'>decodeQuery</a></li>
  <li style='display: block;'><a href='#defVal'>defVal</a></li>
  <li style='display: block;'><a href='#encode'>encode</a></li>
  <li style='display: block;'><a href='#encodeQuery'>encodeQuery</a></li>
  <li style='display: block;'><a href='#equals'>equals</a></li>
  <li style='display: block;'><a href='#ext'>ext</a></li>
  <li style='display: block;'><a href='#frag'>frag</a></li>
  <li style='display: block;'><a href='#fromStr'>fromStr</a></li>
  <li style='display: block;'><a href='#get'>get</a></li>
  <li style='display: block;'><a href='#getRange'>getRange</a></li>
  <li style='display: block;'><a href='#getRangeToPathAbs'>getRangeToPathAbs</a></li>
  <li style='display: block;'><a href='#hash'>hash</a></li>
  <li style='display: block;'><a href='#host'>host</a></li>
  <li style='display: block;'><a href='#isAbs'>isAbs</a></li>
  <li style='display: block;'><a href='#isDir'>isDir</a></li>
  <li style='display: block;'><a href='#isName'>isName</a></li>
  <li style='display: block;'><a href='#isPathAbs'>isPathAbs</a></li>
  <li style='display: block;'><a href='#isPathOnly'>isPathOnly</a></li>
  <li style='display: block;'><a href='#isRel'>isRel</a></li>
  <li style='display: block;'><a href='#mimeType'>mimeType</a></li>
  <li style='display: block;'><a href='#name'>name</a></li>
  <li style='display: block;'><a href='#parent'>parent</a></li>
  <li style='display: block;'><a href='#path'>path</a></li>
  <li style='display: block;'><a href='#pathOnly'>pathOnly</a></li>
  <li style='display: block;'><a href='#pathStr'>pathStr</a></li>
  <li style='display: block;'><a href='#plus'>plus</a></li>
  <li style='display: block;'><a href='#plusName'>plusName</a></li>
  <li style='display: block;'><a href='#plusQuery'>plusQuery</a></li>
  <li style='display: block;'><a href='#plusSlash'>plusSlash</a></li>
  <li style='display: block;'><a href='#port'>port</a></li>
  <li class='hidden' style='display: block;'><a href='#privateMake'>privateMake</a></li>
  <li style='display: block;'><a href='#query'>query</a></li>
  <li style='display: block;'><a href='#queryStr'>queryStr</a></li>
  <li style='display: block;'><a href='#relTo'>relTo</a></li>
  <li style='display: block;'><a href='#relToAuth'>relToAuth</a></li>
  <li style='display: block;'><a href='#scheme'>scheme</a></li>
  <li style='display: block;'><a href='#slice'>slice</a></li>
  <li style='display: block;'><a href='#sliceToPathAbs'>sliceToPathAbs</a></li>
  <li style='display: block;'><a href='#toCode'>toCode</a></li>
  <li style='display: block;'><a href='#toFile'>toFile</a></li>
  <li style='display: block;'><a href='#toLocale'>toLocale</a></li>
  <li style='display: block;'><a href='#toStr'>toStr</a></li>
  <li style='display: block;'><a href='#userInfo'>userInfo</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
sys 1.0.56
[11-Nov-2010 Thu 10:08:16AM EST]
</p>
</div>
</div>
</body>
</html>
