<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>sys::Env</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>sys</a></li>
  <li>&gt;</li>
  <li><a href='Env.html'>Env</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='type'>
<div class='overview'>
<h2>abstract const class</h2>
<h1>sys::Env</h1>
<pre><a href='Obj.html'>sys::Obj</a>
  sys::Env</pre>
</div>
<div class='detail'>

<p>Env defines a pluggable class used boot and manage a Fantom runtime environment.</p>
</div>
</div>
<div class='slots'>
<div class='detail'>
<h2>Slots</h2>
<dl>
<dt id='arch' class='method'>arch<a href='Env_src.html#arch'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Str.html'>Str</a> arch()</code></p>

<p>Microprocessor architecture name as one of the following constants:</p>

<ul>
<li>"x86"</li>

<li>"x86_64"</li>

<li>"ppc"</li>

<li>"sparc"</li>

<li>"ia64"</li>

<li>"ia64_32"</li>
</ul>
</dd>
<dt id='args' class='method'>args<a href='Env_src.html#args'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Str.html'>Str</a>[] args()</code></p>

<p>Get the command line arguments used to run the fan process as an immutable List of strings.  Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='compileScript' class='method'>compileScript<a href='Env_src.html#compileScript'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Type.html'>Type</a> compileScript(<a href='File.html'>File</a> f, [<a href='Str.html'>Str</a>:<a href='Obj.html'>Obj</a>]? options := null)</code></p>

<p>Compile a script file into a pod and return the first public type declared in the script file.  If the file has been previously compiled and hasn't changed, then a cached type is returned.  If the script contains errors then the first CompilerErr found is thrown.  The options available:</p>

<ul>
<li>logLevel: the default <code><a href='LogLevel.html'>LogLevel</a></code> to use for logging the compilation process and errors</li>

<li>log: the <code><a href='../compiler/CompilerLog.html'>compiler::CompilerLog</a></code> to use for logging the compilation process and errors</li>

<li>logOut: an output stream to capture logging</li>

<li>force: pass <code>true</code> to not use caching, always forces a recompile</li>
</ul>
</dd>
<dt id='config' class='method'>config<a href='Env_src.html#config'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Str.html'>Str</a>? config(<a href='Pod.html'>Pod</a> pod, <a href='Str.html'>Str</a> key, <a href='Str.html'>Str</a>? def := null)</code></p>

<p>Lookup a configuration property for given pod/key pair. If not found then return <code>def</code>.  Default implementation routes to <a href='Env.html#props'>props</a> using max age of one minute:</p>

<pre>props(pod, `config.props`, 1min).get(key, def)</pre>

<p>Also see <code><a href='Pod.html#config'>Pod.config</a></code> and <a href='../docLang/Env.html'>docLang::Env</a>.</p>
</dd>
<dt id='cur' class='method'>cur<a href='Env_src.html#cur'>Source</a></dt>
<dd>
<p><code class='sig'>static <a href='Env.html'>Env</a> cur()</code></p>

<p>Get the current runtime environment</p>
</dd>
<dt id='diagnostics' class='method'>diagnostics<a href='Env_src.html#diagnostics'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Str.html'>Str</a>:<a href='Obj.html'>Obj</a> diagnostics()</code></p>

<p>Poll for a platform dependent map of diagnostics name/value pairs for the current state of the VM.  Java platforms return key values from the <code>java.lang.management</code> interface. Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='err' class='method'>err<a href='Env_src.html#err'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='OutStream.html'>OutStream</a> err()</code></p>

<p>Standard error output stream. Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='exit' class='method'>exit<a href='Env_src.html#exit'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Void.html'>Void</a> exit(<a href='Int.html'>Int</a> status := 0)</code></p>

<p>Terminate the current virtual machine. Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='findAllFiles' class='method'>findAllFiles<a href='Env_src.html#findAllFiles'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='File.html'>File</a>[] findAllFiles(<a href='Uri.html'>Uri</a> uri)</code></p>

<p>Find all the files in the environment which match a relative path such as "etc/foo/config.props".  It is possible to have multiple matches if the environment uses a search path model. If the list contains more than one item, then the first file has the highest priority and the last item has the lowest priority.  If the URI is not relative then throw ArgErr. Return empty list if the file is not found in environment. Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='findAllPodNames' class='method'>findAllPodNames<a href='Env_src.html#findAllPodNames'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Str.html'>Str</a>[] findAllPodNames()</code></p>

<p>Return the list of pod names for all the pods currently installed in this environemnt.  This method is used by <code><a href='Pod.html#list'>Pod.list</a></code> and for constructing the type database.  Each of these names must be resolvable by <a href='Env.html#findPodFile'>findPodFile</a>.  The default implementation routes to <a href='Env.html#findFile'>findFile</a> to look in the "lib/etc" directory and assumes a naming convention of "{name}.pod".</p>
</dd>
<dt id='findFile' class='method'>findFile<a href='Env_src.html#findFile'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='File.html'>File</a>? findFile(<a href='Uri.html'>Uri</a> uri, <a href='Bool.html'>Bool</a> checked := true)</code></p>

<p>Find a file in the environment using a relative path such as "etc/foo/config.props".  If the URI is not relative then throw ArgErr.  If the file is not found in the environment then throw UnresolvedErr or return null based on checked flag.  If <a href='Env.html#findAllFiles'>findAllFiles</a> would return multiple matches, then this method should always return the file with the highest priority. Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='findPodFile' class='method'>findPodFile<a href='Env_src.html#findPodFile'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='File.html'>File</a>? findPodFile(<a href='Str.html'>Str</a> podName)</code></p>

<p>Resolve the pod file for the given pod name.  If the name cannot be resovled to a pod, return null.  The default implementation routes to <a href='Env.html#findFile'>findFile</a> to look in "lib/etc" directory.</p>
</dd>
<dt id='gc' class='method'>gc<a href='Env_src.html#gc'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Void.html'>Void</a> gc()</code></p>

<p>Run the garbage collector.  No guarantee is made to what the VM will actually do.  Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='homeDir' class='method'>homeDir<a href='Env_src.html#homeDir'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='File.html'>File</a> homeDir()</code></p>

<p>Get the home directory of Fantom installation. Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='host' class='method'>host<a href='Env_src.html#host'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Str.html'>Str</a> host()</code></p>

<p>Get the local host name of the machine running the virtual machine process.  Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='idHash' class='method'>idHash<a href='Env_src.html#idHash'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Int.html'>Int</a> idHash(<a href='Obj.html'>Obj</a>? obj)</code></p>

<p>Return the default hash code of <code><a href='Obj.html#hash'>Obj.hash</a></code> for the specified object regardless of whether the object has overridden the <code>hash</code> method.  If null then return 0.</p>
</dd>
<dt id='in' class='method'>in<a href='Env_src.html#in'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='InStream.html'>InStream</a> in()</code></p>

<p>Standard input stream. Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='index' class='method'>index<a href='Env_src.html#index'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Str.html'>Str</a>[] index(<a href='Str.html'>Str</a> key)</code></p>

<p>Lookup all the matching values for a pod indexed key.  If no matches are found return the empty list.  Indexed props are declared in your pod's build script, and coalesced into a master index by the current environment.  See <a href='../docLang/Env.html#index'>docLang</a> for details.</p>
</dd>
<dt id='locale' class='method'>locale<a href='Env_src.html#locale'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Str.html'>Str</a>? locale(<a href='Pod.html'>Pod</a> pod, <a href='Str.html'>Str</a> key, <a href='Str.html'>Str</a>? def := "key", <a href='Locale.html'>Locale</a> locale := Locale.cur())</code></p>

<p>Lookup a localized property for the specified pod/key pair. The following rules are used for resolution:</p>

<ol style='list-style-type:decimal'>
<li><code>props(pod, `locale/{locale}.props`)</code></li>

<li><code>props(pod, `locale/{lang}.props`)</code></li>

<li><code>props(pod, `locale/en.props`)</code></li>

<li>Fallback to <code>pod::key</code> unless <code>def</code> specified</li>
</ol>

<p>Where <code>{locale}</code> is <code><a href='Locale.html#toStr'>Locale.toStr</a></code> and <code>{lang}</code> is <code><a href='Locale.html#lang'>Locale.lang</a></code>.</p>

<p>Also see <code><a href='Pod.html#locale'>Pod.locale</a></code> and <a href='../docLang/Localization.html'>docLang::Localization</a>.</p>
</dd>
<dt id='make' class='method'>make<a href='Env_src.html#make'>Source</a></dt>
<dd>
<p><code class='sig'>new make(<a href='Env.html'>Env</a> parent := Env.cur())</code></p>

<p>Subclasses are constructed from a parent environment.</p>
</dd>
<dt id='os' class='method'>os<a href='Env_src.html#os'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Str.html'>Str</a> os()</code></p>

<p>Operating system name as one of the following constants:</p>

<ul>
<li>"win32"</li>

<li>"macosx"</li>

<li>"linux"</li>

<li>"aix"</li>

<li>"solaris"</li>

<li>"hpux"</li>

<li>"qnx"</li>
</ul>
</dd>
<dt id='out' class='method'>out<a href='Env_src.html#out'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='OutStream.html'>OutStream</a> out()</code></p>

<p>Standard output stream. Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='parent' class='method'>parent<a href='Env_src.html#parent'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Env.html'>Env</a>? parent()</code></p>

<p>Get the parent environment or null if this is the bootstrap environment.  Many virtual methods delegate to their parent by default.</p>
</dd>
<dt id='platform' class='method'>platform<a href='Env_src.html#platform'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Str.html'>Str</a> platform()</code></p>

<p>Name of the host platform as a string formatted as "&lt;os>-&lt;arch>".  See <a href='Env.html#os'>os</a> and <a href='Env.html#arch'>arch</a>.</p>
</dd>
<dt id='props' class='method'>props<a href='Env_src.html#props'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Str.html'>Str</a>:<a href='Str.html'>Str</a> props(<a href='Pod.html'>Pod</a> pod, <a href='Uri.html'>Uri</a> uri, <a href='Duration.html'>Duration</a> maxAge)</code></p>

<p>Return a merged key/value map of all the prop files found using the following resolution rules:</p>

<ol style='list-style-type:decimal'>
<li><code><a href='Env.html#findAllFiles'>Env.findAllFiles</a></code>: "etc/{pod}/{uri}"</li>

<li><code><a href='Pod.html#files'>Pod.files</a></code>: "/{uri}"</li>
</ol>

<p>The uri must be relative.</p>

<p>The files are parsed using <code><a href='InStream.html#readProps'>InStream.readProps</a></code> and merged according to their priority order.  If the file is defined as a resource in the pod itself, then it is treated as lowest priority.  The first file returned by <code>findAllFiles</code> is treated as highest priority and overwrites any key-value pairs defined at a lower priority.</p>

<p>The map is cached so that subsequent calls for the same path doesn't require accessing the file system again.  The <code>maxAge</code> parameter specifies the tolerance accepted before a cache refresh is performed to check if any of the files have been modified.</p>

<p>Also see <code><a href='Pod.html#props'>Pod.props</a></code> and <a href='../docLang/Env.html'>docLang::Env</a>.</p>
</dd>
<dt id='runtime' class='method'>runtime<a href='Env_src.html#runtime'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Str.html'>Str</a> runtime()</code></p>

<p>Virtual machine runtime as one of the following constants:</p>

<ul>
<li>"java"</li>

<li>"dotnet"</li>

<li>"js"</li>
</ul>
</dd>
<dt id='tempDir' class='method'>tempDir<a href='Env_src.html#tempDir'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='File.html'>File</a> tempDir()</code></p>

<p>Get the temp directory to use for scratch files. Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='user' class='method'>user<a href='Env_src.html#user'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Str.html'>Str</a> user()</code></p>

<p>Get the user name of the user account used to run the virtual machine process.  Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='vars' class='method'>vars<a href='Env_src.html#vars'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='Str.html'>Str</a>:<a href='Str.html'>Str</a> vars()</code></p>

<p>Get the environment variables as a case insensitive, immutable map of Str name/value pairs.  The environment map is initialized from the following sources from lowest priority to highest priority:</p>

<ol style='list-style-type:decimal'>
<li>shell environment variables</li>

<li>Java system properties (Java VM only obviously)</li>
</ol>

<p>Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
<dt id='workDir' class='method'>workDir<a href='Env_src.html#workDir'>Source</a></dt>
<dd>
<p><code class='sig'>virtual <a href='File.html'>File</a> workDir()</code></p>

<p>Get the working directory to use for saving compiled pods and configuration information.  Default implementation delegates to <a href='Env.html#parent'>parent</a>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class='sidebar'>
<h2>Type</h2>
<ul class='clean'>
  <li><a href='Env_src.html'>View Source</a></li>
  <li><a href='#' onclick='ShowSlots.toggle(event); return false;'>Show All Slots</a></li>
</ul>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li><a href='#arch'>arch</a></li>
  <li><a href='#args'>args</a></li>
  <li><a href='#compileScript'>compileScript</a></li>
  <li><a href='#config'>config</a></li>
  <li><a href='#cur'>cur</a></li>
  <li><a href='#diagnostics'>diagnostics</a></li>
  <li><a href='#err'>err</a></li>
  <li><a href='#exit'>exit</a></li>
  <li><a href='#findAllFiles'>findAllFiles</a></li>
  <li><a href='#findAllPodNames'>findAllPodNames</a></li>
  <li><a href='#findFile'>findFile</a></li>
  <li><a href='#findPodFile'>findPodFile</a></li>
  <li><a href='#gc'>gc</a></li>
  <li><a href='#homeDir'>homeDir</a></li>
  <li><a href='#host'>host</a></li>
  <li><a href='#idHash'>idHash</a></li>
  <li><a href='#in'>in</a></li>
  <li><a href='#index'>index</a></li>
  <li><a href='#locale'>locale</a></li>
  <li><a href='#make'>make</a></li>
  <li><a href='#os'>os</a></li>
  <li><a href='#out'>out</a></li>
  <li><a href='#parent'>parent</a></li>
  <li><a href='#platform'>platform</a></li>
  <li><a href='#props'>props</a></li>
  <li><a href='#runtime'>runtime</a></li>
  <li><a href='#tempDir'>tempDir</a></li>
  <li><a href='#user'>user</a></li>
  <li><a href='#vars'>vars</a></li>
  <li><a href='#workDir'>workDir</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
sys 1.0.56
[11-Nov-2010 Thu 10:08:16AM EST]
</p>
</div>
</div>
</body>
</html>
