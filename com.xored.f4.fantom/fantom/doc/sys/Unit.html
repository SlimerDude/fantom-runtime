<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>sys::Unit</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>sys</a></li>
  <li>&gt;</li>
  <li><a href='Unit.html'>Unit</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='type'>
<div class='overview'>
<h2>const class</h2>
<h1>sys::Unit</h1>
<pre><a href='Obj.html'>sys::Obj</a>
  sys::Unit</pre>
</div>
<p><code class='sig'>@<a href='Serializable.html'>Serializable</a> {
simple=true
collection=false
}<br/>
</code></p>
<div class='detail'>

<p>Unit models a unit of measurement.  Units are represented as:</p>

<ul>
<li>ids: each unit has one or more unique identifiers for the unit within the VM.  Units are typically defined in the unit database "etc/sys/units.txt" or can be via by the <a href='Unit.html#define'>define</a> method. Every id assigned to a unit must be unique within the VM.</li>

<li>name: the first identifier in the ids list is called the <em>name</em> and should be a descriptive summary of the unit using words separated by underbar such as "miles_per_hour".</li>

<li>symbol: the last identifier in the ids list should be the abbreviated symbol; for example "kilogram" has the symbol "kg". In units with only one id, the symbol is the same as the name. Units with exponents should use Unicode superscript chars, not ASCII digits.</li>

<li>dimension: defines the ratio of the seven SI base units: m, kg, sec, A, K, mol, and cd</li>

<li>scale/factor: defines the normalization equations for unit conversion</li>
</ul>

<p>A unit identifier is limited to the following characters:</p>

<ul>
<li>any Unicode char over 128</li>

<li>ASCII letters <code>a</code>-'z' and <code>A</code>-'Z'</li>

<li>underbar <code>_</code></li>

<li>division sign'/'</li>

<li>percent sign <code>%</code></li>
</ul>

<p>Units with equal dimensions are considered to the measure the same physical quantity.  This is not always true, but good enough for practice. Conversions with the <code>convertTo</code> method are expressed with the following equations:</p>

<pre>unit       = dimension * scale + offset
toNormal   = scalar * scale + offset
fromNormal = (scalar - offset) / scale
toUnit     = fromUnit.fromNormal( toUnit.toNormal(sclar) )</pre>

<p>As a simple, pragmatic solution for modeling Units, there are some units which don't fit this model including logarithm and angular units. Units which don't cleanly fit this model should be represented as dimensionless (all ratios set to zero).</p>

<p>Fantom's model for units of measurement and the unit database are derived from the OASIS oBIX specification.</p>
</div>
</div>
<div class='slots'>
<div class='detail'>
<h2>Slots</h2>
<dl>
<dt id='A' class='method'>A<a href='Unit_src.html#A'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Int.html'>Int</a> A()</code></p>

<p>Ampere (electric current) component of the unit dimension.</p>
</dd>
<dt id='K' class='method'>K<a href='Unit_src.html#K'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Int.html'>Int</a> K()</code></p>

<p>Kelvin (thermodynamic temperature) component of the unit dimension.</p>
</dd>
<dt id='cd' class='method'>cd<a href='Unit_src.html#cd'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Int.html'>Int</a> cd()</code></p>

<p>Candela (luminous intensity) component of the unit dimension.</p>
</dd>
<dt id='convertTo' class='method'>convertTo<a href='Unit_src.html#convertTo'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Float.html'>Float</a> convertTo(<a href='Float.html'>Float</a> scalar, <a href='Unit.html'>Unit</a> unit)</code></p>

<p>Convert a scalar value from this unit to the given unit.  If the units do not have the same dimension then throw Err. For example, to convert 3km to meters:</p>

<pre>m  := Unit.find("meter")
km := Unit.find("kilometer")
km.convertTo(3f, m)  =>  3000f</pre>
</dd>
<dt id='define' class='method'>define<a href='Unit_src.html#define'>Source</a></dt>
<dd>
<p><code class='sig'>static <a href='Unit.html'>Unit</a> define(<a href='Str.html'>Str</a> s)</code></p>

<p>Define a new Unit definition in the VM's unit database using the following string format:</p>

<pre>unit   := &lt;ids> [";" &lt;dim> [";" &lt;scale> [";" &lt;offset>]]]
names  := &lt;ids> ("," &lt;id>)*
id     := &lt;idChar>*
idChar := 'a'-'z' | 'A'-'Z' | '_' | '%' | '/' | any char > 128
dim    := &lt;ratio> ["*" &lt;ratio>]*   // no whitespace allowed
ratio  := &lt;base> &lt;exp>
base   := "kg" | "m" | "sec" | "K" | "A" | "mol" | "cd"
exp    := &lt;int>
scale  := &lt;float>
offset := &lt;float></pre>

<p>If the format is incorrect or any identifiers are already defined then throw an exception.</p>
</dd>
<dt id='definition' class='method'>definition<a href='Unit_src.html#definition'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Str.html'>Str</a> definition()</code></p>

<p>Return string format as specified by <a href='Unit.html#define'>define</a>.</p>
</dd>
<dt id='div' class='method'>div<a href='Unit_src.html#div'>Source</a></dt>
<dd>
<p><code class='sig'>@<a href='Operator.html'>Operator</a> <br/>
<a href='Unit.html'>Unit</a> div(<a href='Unit.html'>Unit</a> b)</code></p>

<p>Match quotient of this divided by b against current database definitions. If an unambiguous match cannot be made then throw Err.</p>
</dd>
<dt id='equals' class='method'>equals<a href='Unit_src.html#equals'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='Bool.html'>Bool</a> equals(<a href='Obj.html'>Obj</a>? that)</code></p>
<div class='slotInfo'>
<p>Overrides <a href='Obj.html#equals'>sys::Obj.equals</a></p>
</div>

<p>Two units are equal if they have reference equality because all units are interned during definition.</p>
</dd>
<dt id='fromStr' class='method'>fromStr<a href='Unit_src.html#fromStr'>Source</a></dt>
<dd>
<p><code class='sig'>static <a href='Unit.html'>Unit</a>? fromStr(<a href='Str.html'>Str</a> s, <a href='Bool.html'>Bool</a> checked := true)</code></p>

<p>Find a unit by one of its identifiers if it has been defined in this VM.  If the unit isn't defined yet and checked is false then return null, otherwise throw Err.  Any units declared in "etc/sys/units.txt" are implicitly defined.</p>
</dd>
<dt id='hash' class='method'>hash<a href='Unit_src.html#hash'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='Int.html'>Int</a> hash()</code></p>
<div class='slotInfo'>
<p>Overrides <a href='Obj.html#hash'>sys::Obj.hash</a></p>
</div>

<p>Return <code>toStr.hash</code>.</p>
</dd>
<dt id='ids' class='method'>ids<a href='Unit_src.html#ids'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Str.html'>Str</a>[] ids()</code></p>

<p>Return the list of programatic identifiers for this unit. The first item is always <a href='Unit.html#name'>name</a> and the last is always <a href='Unit.html#symbol'>symbol</a>.</p>
</dd>
<dt id='kg' class='method'>kg<a href='Unit_src.html#kg'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Int.html'>Int</a> kg()</code></p>

<p>Kilogram (mass) component of the unit dimension.</p>
</dd>
<dt id='list' class='method'>list<a href='Unit_src.html#list'>Source</a></dt>
<dd>
<p><code class='sig'>static <a href='Unit.html'>Unit</a>[] list()</code></p>

<p>List all the units currently defined in the VM.  Any units declared in "etc/sys/units.txt" are implicitly defined.</p>
</dd>
<dt id='m' class='method'>m<a href='Unit_src.html#m'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Int.html'>Int</a> m()</code></p>

<p>Meter (length) component of the unit dimension.</p>
</dd>
<dt id='mol' class='method'>mol<a href='Unit_src.html#mol'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Int.html'>Int</a> mol()</code></p>

<p>Mole (amount of substance) component of the unit dimension.</p>
</dd>
<dt id='mult' class='method'>mult<a href='Unit_src.html#mult'>Source</a></dt>
<dd>
<p><code class='sig'>@<a href='Operator.html'>Operator</a> <br/>
<a href='Unit.html'>Unit</a> mult(<a href='Unit.html'>Unit</a> that)</code></p>

<p>Match the product of this and b against current database definitions. If an unambiguous match cannot be made then throw Err.</p>
</dd>
<dt id='name' class='method'>name<a href='Unit_src.html#name'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Str.html'>Str</a> name()</code></p>

<p>Return the primary name identifier of this unit. This is always the first item in <a href='Unit.html#ids'>ids</a>.</p>
</dd>
<dt id='offset' class='method'>offset<a href='Unit_src.html#offset'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Float.html'>Float</a> offset()</code></p>

<p>Return the offset factor used to convert this unit "from normal". See class header for normalization and conversion equations.  Offset is used most commonly with temperature units.  The offset for normalized unit is always zero.</p>
</dd>
<dt id='quantities' class='method'>quantities<a href='Unit_src.html#quantities'>Source</a></dt>
<dd>
<p><code class='sig'>static <a href='Str.html'>Str</a>[] quantities()</code></p>

<p>List the quantity names used to organize the unit database in "etc/sys/units.txt".  Quantities are merely a convenient mechanism to organize the unit database - there is no guarantee that they include all current VM definitions.</p>
</dd>
<dt id='quantity' class='method'>quantity<a href='Unit_src.html#quantity'>Source</a></dt>
<dd>
<p><code class='sig'>static <a href='Unit.html'>Unit</a>[] quantity(<a href='Str.html'>Str</a> quantity)</code></p>

<p>Get the units organized under a specific quantity name in the unit database "etc/sys/units.txt".  Quantities are merely a convenient mechanism to organize the unit database - there is no guarantee that they include all current VM definitions.</p>
</dd>
<dt id='scale' class='method'>scale<a href='Unit_src.html#scale'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Float.html'>Float</a> scale()</code></p>

<p>Return the scale factor used to convert this unit "from normal". For example the scale factor for kilometer is 1000 because it is defined as a 1000 meters where meter is the normalized unit for length.  See class header for normalization and conversion equations. The scale factor the normalized unit is always one.</p>
</dd>
<dt id='sec' class='method'>sec<a href='Unit_src.html#sec'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Int.html'>Int</a> sec()</code></p>

<p>Second (time) component of the unit dimension.</p>
</dd>
<dt id='symbol' class='method'>symbol<a href='Unit_src.html#symbol'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Str.html'>Str</a> symbol()</code></p>

<p>Return the abbreviated symbol for this unit. This is always the last item in <a href='Unit.html#ids'>ids</a>.</p>
</dd>
<dt id='toStr' class='method'>toStr<a href='Unit_src.html#toStr'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='Str.html'>Str</a> toStr()</code></p>
<div class='slotInfo'>
<p>Overrides <a href='Obj.html#toStr'>sys::Obj.toStr</a></p>
</div>

<p>Return <a href='Unit.html#symbol'>symbol</a>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class='sidebar'>
<h2>Type</h2>
<ul class='clean'>
  <li><a href='Unit_src.html'>View Source</a></li>
  <li><a href='#' onclick='ShowSlots.toggle(event); return false;'>Show All Slots</a></li>
</ul>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li><a href='#A'>A</a></li>
  <li><a href='#K'>K</a></li>
  <li><a href='#cd'>cd</a></li>
  <li><a href='#convertTo'>convertTo</a></li>
  <li><a href='#define'>define</a></li>
  <li><a href='#definition'>definition</a></li>
  <li><a href='#div'>div</a></li>
  <li><a href='#equals'>equals</a></li>
  <li><a href='#fromStr'>fromStr</a></li>
  <li><a href='#hash'>hash</a></li>
  <li><a href='#ids'>ids</a></li>
  <li><a href='#kg'>kg</a></li>
  <li><a href='#list'>list</a></li>
  <li><a href='#m'>m</a></li>
  <li><a href='#mol'>mol</a></li>
  <li><a href='#mult'>mult</a></li>
  <li><a href='#name'>name</a></li>
  <li><a href='#offset'>offset</a></li>
  <li><a href='#quantities'>quantities</a></li>
  <li><a href='#quantity'>quantity</a></li>
  <li><a href='#scale'>scale</a></li>
  <li><a href='#sec'>sec</a></li>
  <li><a href='#symbol'>symbol</a></li>
  <li><a href='#toStr'>toStr</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
sys 1.0.56
[11-Nov-2010 Thu 10:08:16AM EST]
</p>
</div>
</div>
</body>
</html>
