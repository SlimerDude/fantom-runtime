<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>sys::Zip</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>sys</a></li>
  <li>&gt;</li>
  <li><a href='Zip.html'>Zip</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='type'>
<div class='overview'>
<h2>final class</h2>
<h1>sys::Zip</h1>
<pre><a href='Obj.html'>sys::Obj</a>
  sys::Zip</pre>
</div>
<div class='detail'>

<p>Zip is used to read/write compressed zip files and streams.  Zip may be used in three modes:</p>

<ol style='list-style-type:decimal'>
<li><code><a href='Zip.html#open'>Zip.open</a></code> is used to read a random access file and provides access to the entire contents with the ability to read select entries</li>

<li><code><a href='Zip.html#read'>Zip.read</a></code> is used to read a zip file from an input stream. Each entry is pulled off the stream using <a href='Zip.html#readNext'>readNext</a></li>

<li><code><a href='Zip.html#write'>Zip.write</a></code> is used to write a zip file to an output stream. Each entry must is written to the stream using <a href='Zip.html#writeNext'>writeNext</a></li>
</ol>
</div>
</div>
<div class='slots'>
<div class='detail'>
<h2>Slots</h2>
<dl>
<dt id='close' class='method'>close<a href='Zip_src.html#close'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Bool.html'>Bool</a> close()</code></p>

<p>Close this zip file for reading and writing.  If this zip file is reading or writing an stream, then the underlying stream is also closed.  This method is guaranteed to never throw an IOErr.  Return true if the close was successful or false if the an error occurred.</p>
</dd>
<dt id='contents' class='method'>contents<a href='Zip_src.html#contents'>Source</a></dt>
<dd>
<p><code class='sig'>[<a href='Uri.html'>Uri</a>:<a href='File.html'>File</a>]? contents()</code></p>

<p>Return the contents of this zip as a map of Files.  The Uri keys will start with a slash and be relative to this zip file. Return null if using streams.</p>
</dd>
<dt id='file' class='method'>file<a href='Zip_src.html#file'>Source</a></dt>
<dd>
<p><code class='sig'><a href='File.html'>File</a>? file()</code></p>

<p>Get the underlying file or null if using streams.</p>
</dd>
<dt id='finish' class='method'>finish<a href='Zip_src.html#finish'>Source</a></dt>
<dd>
<p><code class='sig'><a href='Bool.html'>Bool</a> finish()</code></p>

<p>Finish writing the contents of this zip file, but leave the underlying OutStream open.  This method is guaranteed to never throw an IOErr. Return true if the stream was finished successfully or false if the an error occurred.  Throw UnsupportedErr if zip is not not writing to an output stream.</p>
</dd>
<dt id='init' class='method hidden'>init<a href='Zip_src.html#init'>Source</a></dt>
<dd class='hidden'>
<p><code class='sig'>new init(<a href='Uri.html'>Uri</a> uri)</code></p>

<p>Private constructor</p>
</dd>
<dt id='open' class='method'>open<a href='Zip_src.html#open'>Source</a></dt>
<dd>
<p><code class='sig'>static <a href='Zip.html'>Zip</a> open(<a href='File.html'>File</a> file)</code></p>

<p>Open the specified file as a zip file for reading.  If the specified file does not exist, is not a valid file, or does not support random access then throw IOErr.</p>

<p>Example:</p>

<pre>zip := Zip.open(File(`test.zip`))
txt := zip.contents[`/notice.txt`].readAllStr
zip.close</pre>
</dd>
<dt id='read' class='method'>read<a href='Zip_src.html#read'>Source</a></dt>
<dd>
<p><code class='sig'>static <a href='Zip.html'>Zip</a> read(<a href='InStream.html'>InStream</a> out)</code></p>

<p>Create a Zip used to read a zip file from the specified input stream.</p>

<p>Example:</p>

<pre>zip := Zip.read(File(`test.zip`).in)
File entry
while ((entry = zip.readNext()) != null)
{
  data := entry.readAllBuf
  echo("$entry size=$data.size")
}
zip.close</pre>
</dd>
<dt id='readNext' class='method'>readNext<a href='Zip_src.html#readNext'>Source</a></dt>
<dd>
<p><code class='sig'><a href='File.html'>File</a>? readNext()</code></p>

<p>Read the next entry in the zip.  Use the File's input stream to read the file contents.  Some file meta-data such as size may not be available. Return null if at end of zip file.  Throw UnsupportedErr if not reading from an input stream.</p>
</dd>
<dt id='toStr' class='method'>toStr<a href='Zip_src.html#toStr'>Source</a></dt>
<dd>
<p><code class='sig'>override <a href='Str.html'>Str</a> toStr()</code></p>
<div class='slotInfo'>
<p>Overrides <a href='Obj.html#toStr'>sys::Obj.toStr</a></p>
</div>

<p>If file is not null then return file.toStr, otherwise return a suitable string representation.</p>
</dd>
<dt id='write' class='method'>write<a href='Zip_src.html#write'>Source</a></dt>
<dd>
<p><code class='sig'>static <a href='Zip.html'>Zip</a> write(<a href='OutStream.html'>OutStream</a> out)</code></p>

<p>Create a Zip used to write a zip file to the specified output stream.</p>

<p>Example:</p>

<pre>zip := Zip.write(File(`test.zip`).out)
out := zip.writeNext(`/path/hello.txt`)
out.writeLine("hello zip")
out.close
zip.close</pre>
</dd>
<dt id='writeNext' class='method'>writeNext<a href='Zip_src.html#writeNext'>Source</a></dt>
<dd>
<p><code class='sig'><a href='OutStream.html'>OutStream</a> writeNext(<a href='Uri.html'>Uri</a> path, <a href='DateTime.html'>DateTime</a> modifyTime := DateTime.now())</code></p>

<p>Append a new file to the end of this zip file and return an OutStream which may be used to write the file contents.  The Uri must not contain a query or fragment; it may optionally start with a slash.  Closing the OutStream will close only this file entry - use Zip.close() when finished writing the entire zip file.  Throw UnsupportedErr if zip is not writing to an output stream.</p>

<p>Examples:</p>

<pre>out := zip.writeNext(`/docs/test.txt`)
out.writeLine("test")
out.close</pre>
</dd>
</dl>
</div>
</div>
</div>
<div class='sidebar'>
<h2>Type</h2>
<ul class='clean'>
  <li><a href='Zip_src.html'>View Source</a></li>
  <li><a href='#' onclick='ShowSlots.toggle(event); return false;'>Show All Slots</a></li>
</ul>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li><a href='#close'>close</a></li>
  <li><a href='#contents'>contents</a></li>
  <li><a href='#file'>file</a></li>
  <li><a href='#finish'>finish</a></li>
  <li class='hidden'><a href='#init'>init</a></li>
  <li><a href='#open'>open</a></li>
  <li><a href='#read'>read</a></li>
  <li><a href='#readNext'>readNext</a></li>
  <li><a href='#toStr'>toStr</a></li>
  <li><a href='#write'>write</a></li>
  <li><a href='#writeNext'>writeNext</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
sys 1.0.56
[11-Nov-2010 Thu 10:08:16AM EST]
</p>
</div>
</div>
</body>
</html>
