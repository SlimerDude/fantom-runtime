<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>lists_2::Lists</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>examples</a></li>
  <li>&gt;</li>
  <li><a href='Lists.html'>sys-lists.html</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='src'>
<pre>
<span>#! /usr/bin/env fan
</span><span class='y'>//</span>
<span class='y'>// Copyright (c) 2008, Brian Frank and Andy Frank</span>
<span class='y'>// Licensed under the Academic Free License version 3.0</span>
<span class='y'>//</span>
<span class='y'>// History:</span>
<span class='y'>//   14 Aug 07  Brian Frank  Creation</span>
<span class='y'>//   08 Sep 09  Brian Frank  Rework fandoc -&gt; example</span>
<span class='y'>//</span>

<span class='z'>**</span>
<span class='z'>** Working with Lists</span>
<span class='z'>**</span>
<span class='k'>class</span> Lists
<span class='b'>{</span>
  Void <span id='main'>main</span><span class='b'>()</span>
  <span class='b'>{</span>
    literals
    access
    modify
    stack
    iteration
    search
    join
    map
    reduce
    sorting
    readOnly
  <span class='b'>}</span>

  Void <span id='literals'>literals</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- literals ---"</span><span class='b'>)</span>
    show<span class='b'>(</span>Int<span class='b'>[</span>10, 20, 30<span class='b'>]</span>,   <span class='s'>"list of the three Ints 10, 20, and 30"</span><span class='b'>)</span>
    show<span class='b'>([</span>10, 20, 30<span class='b'>]</span>,      <span class='s'>"same as above using type inference"</span><span class='b'>)</span>
    show<span class='b'>(</span>Int?<span class='b'>[</span>10, 20, 30<span class='b'>]</span>,  <span class='s'>"list of Ints which might contain null"</span><span class='b'>)</span>
    show<span class='b'>(</span>Int<span class='b'>[</span>,<span class='b'>]</span>,            <span class='s'>"empty list of Ints"</span><span class='b'>)</span>
    show<span class='b'>(</span>Obj<span class='b'>[</span>,<span class='b'>]</span>,            <span class='s'>"empty list of Objs"</span><span class='b'>)</span>
    show<span class='b'>([</span>,<span class='b'>]</span>,               <span class='s'>"empty list of Objs?"</span><span class='b'>)</span>
    show<span class='b'>([</span>1, 2f, 3<span class='b'>]</span>,        <span class='s'>"evaluates to Num[]"</span><span class='b'>)</span>
    show<span class='b'>(</span>Num<span class='b'>[</span>1, 2, 3<span class='b'>]</span>,      <span class='s'>"evaluates to Num[]"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='access'>access</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- access ---"</span><span class='b'>)</span>
    list := <span class='b'>[</span><span class='s'>"a"</span>, <span class='s'>"b"</span>, <span class='s'>"c"</span>, <span class='s'>"d"</span><span class='b'>]</span>
    show<span class='b'>(</span>list.size,          <span class='s'>"get number of items, returns 4"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.isEmpty,       <span class='s'>"convenience for size == 0"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.index<span class='b'>(</span><span class='s'>"c"</span><span class='b'>)</span>,    <span class='s'>"index of 'c', returns 2"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.index<span class='b'>(</span><span class='s'>"x"</span><span class='b'>)</span>,    <span class='s'>"index of 'x', returns null"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.contains<span class='b'>(</span><span class='s'>"c"</span><span class='b'>)</span>, <span class='s'>"does list contain 'c', returns true"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.first,         <span class='s'>"returns 'a'"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.last,          <span class='s'>"retsurns 'd'"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.get<span class='b'>(</span>2<span class='b'>)</span>,        <span class='s'>"return item at index 2, returns 'c'"</span><span class='b'>)</span>
    show<span class='b'>(</span>list<span class='b'>[</span>2<span class='b'>]</span>,            <span class='s'>"convenience for list.get(2), returns 'c'"</span><span class='b'>)</span>
    show<span class='b'>(</span>list<span class='b'>[</span>-1<span class='b'>]</span>,           <span class='s'>"last item 'd'"</span><span class='b'>)</span>
    show<span class='b'>(</span>list<span class='b'>[</span>-3<span class='b'>]</span>,           <span class='s'>"item at size-3, returns 'b'"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.slice<span class='b'>(</span>0..2<span class='b'>)</span>,   <span class='s'>"slice 0 to 1 inclusive, returns [a,b,c]"</span><span class='b'>)</span>
    show<span class='b'>(</span>list<span class='b'>[</span>0..2<span class='b'>]</span>,         <span class='s'>"convenience for list.slice(0..2)"</span><span class='b'>)</span>
    show<span class='b'>(</span>list<span class='b'>[</span>0..&lt;2<span class='b'>]</span>,        <span class='s'>"slice 0 to 2 exclusive [a,b]"</span><span class='b'>)</span>
    show<span class='b'>(</span>list<span class='b'>[</span>-3..-1<span class='b'>]</span>,       <span class='s'>"slice size-3 to size-1 inclusive [b,c,d]"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='modify'>modify</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- modify ---"</span><span class='b'>)</span>
    list := <span class='b'>[</span><span class='s'>"one"</span>, <span class='s'>"two"</span>, <span class='s'>"three"</span><span class='b'>]</span>
    show<span class='b'>(</span>list.add<span class='b'>(</span><span class='s'>"four"</span><span class='b'>)</span>,        <span class='s'>"add 'four' to end of list"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.remove<span class='b'>(</span><span class='s'>"four"</span><span class='b'>)</span>,     <span class='s'>"remove 'four' from list"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.removeAt<span class='b'>(</span>0<span class='b'>)</span>,        <span class='s'>"remove item at index 0"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.insert<span class='b'>(</span>0, <span class='s'>"x"</span><span class='b'>)</span>,     <span class='s'>"insert at index 0"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.insert<span class='b'>(</span>-1, <span class='s'>"y"</span><span class='b'>)</span>,    <span class='s'>"insert at end of list"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.addAll<span class='b'>([</span><span class='s'>"a"</span>, <span class='s'>"b"</span><span class='b'>])</span>, <span class='s'>"add 'a' and 'b' to end of list"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.set<span class='b'>(</span>2, <span class='s'>"z"</span><span class='b'>)</span>,        <span class='s'>"set item at index 2 to 'z'"</span><span class='b'>)</span>
    show<span class='b'>(</span>list<span class='b'>[</span>2<span class='b'>]</span> = <span class='s'>"z"</span>,           <span class='s'>"convenience for list.set(2, 'z')"</span><span class='b'>)</span>
    show<span class='b'>(</span>list.clear,              <span class='s'>"remove all the items from the list"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='stack'>stack</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- stack ---"</span><span class='b'>)</span>
    stack := Str<span class='b'>[</span>,<span class='b'>]</span>
    show<span class='b'>(</span>stack.push<span class='b'>(</span><span class='s'>"a"</span><span class='b'>)</span>,    <span class='s'>"[a]"</span><span class='b'>)</span>
    show<span class='b'>(</span>stack.push<span class='b'>(</span><span class='s'>"b"</span><span class='b'>)</span>,    <span class='s'>"[a, b]"</span><span class='b'>)</span>
    show<span class='b'>(</span>stack.peek,         <span class='s'>"returns 'b'"</span><span class='b'>)</span>
    show<span class='b'>(</span>stack.pop,          <span class='s'>"returns 'b'"</span><span class='b'>)</span>
    show<span class='b'>(</span>stack.pop,          <span class='s'>"returns 'a'"</span><span class='b'>)</span>
    show<span class='b'>(</span>stack.pop,          <span class='s'>"returns null"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='iteration'>iteration</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- iteration ---"</span><span class='b'>)</span>

    list := <span class='b'>[</span><span class='s'>"a"</span>, <span class='s'>"b"</span>, <span class='s'>"c"</span><span class='b'>]</span>
    Str r := <span class='s'>""</span>

    r = <span class='s'>""</span>; list.each |Str s| <span class='b'>{</span> r += <span class='s'>"$s "</span> <span class='b'>}</span>
    show<span class='b'>(</span>r, <span class='s'>"each"</span><span class='b'>)</span>

    r = <span class='s'>""</span>; list.each |Str s, Int i| <span class='b'>{</span> r += <span class='s'>"$i=$s "</span> <span class='b'>}</span>
    show<span class='b'>(</span>r, <span class='s'>"each with index"</span><span class='b'>)</span>

    r = <span class='s'>""</span>; list.each |s, i| <span class='b'>{</span> r += <span class='s'>"$i=$s "</span> <span class='b'>}</span>
    show<span class='b'>(</span>r, <span class='s'>"each with type inference"</span><span class='b'>)</span>

    r = <span class='s'>""</span>; list.eachr |s| <span class='b'>{</span> r += <span class='s'>"$s "</span> <span class='b'>}</span>
    show<span class='b'>(</span>r, <span class='s'>"reverse iteration"</span><span class='b'>)</span>

    x := list.eachWhile |s| <span class='b'>{</span> s == <span class='s'>"b"</span> ? 99 : <span class='k'>null</span> <span class='b'>}</span>
    show<span class='b'>(</span>x, <span class='s'>"iterate until b, then return 99"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='search'>search</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- search ---"</span><span class='b'>)</span>

    x := <span class='b'>[</span>0, 1, 2, 3, 4<span class='b'>]</span>
    y := <span class='b'>[</span><span class='s'>"a"</span>, 3, <span class='s'>"foo"</span>, 5sec, <span class='k'>null</span><span class='b'>]</span>
    z := <span class='b'>[</span><span class='s'>"albatross"</span>, <span class='s'>"dog"</span>, <span class='s'>"horse"</span><span class='b'>]</span>

    show<span class='b'>(</span>x.find |v| <span class='b'>{</span> v.toStr == <span class='s'>"3"</span> <span class='b'>}</span>,  <span class='s'>"returns 3"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.find |v| <span class='b'>{</span> v.toStr == <span class='s'>"7"</span> <span class='b'>}</span>,  <span class='s'>"returns null"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.findAll |v| <span class='b'>{</span> v.isEven <span class='b'>}</span>,     <span class='s'>"returns [0, 2, 4]"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.exclude |v| <span class='b'>{</span> v.isEven <span class='b'>}</span>,     <span class='s'>"returns [1, 3]"</span><span class='b'>)</span>
    show<span class='b'>(</span>y.findType<span class='b'>(</span>Str#<span class='b'>)</span>,               <span class='s'>"returns Str[a, foo]"</span><span class='b'>)</span>
    show<span class='b'>(</span>z.max,                          <span class='s'>"returns horse"</span><span class='b'>)</span>
    show<span class='b'>(</span>z.min,                          <span class='s'>"returns albatross"</span><span class='b'>)</span>
    show<span class='b'>(</span>z.min |a, b| <span class='b'>{</span> a.size &lt;=&gt; b.size <span class='b'>}</span>, <span class='s'>"returns dog"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='join'>join</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- join ---"</span><span class='b'>)</span>
    x := <span class='b'>[</span><span class='s'>'a'</span>, <span class='s'>'b'</span>, <span class='s'>'c'</span><span class='b'>]</span>
    show<span class='b'>(</span>x.join,                        <span class='s'>"returns 979899"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.join<span class='b'>(</span><span class='s'>","</span><span class='b'>)</span>,                   <span class='s'>"returns 97,98,99"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.join<span class='b'>(</span><span class='s'>","</span><span class='b'>)</span> |v| <span class='b'>{</span> v.toChar <span class='b'>}</span>,  <span class='s'>"returns a,b,c"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.join<span class='b'>(</span><span class='s'>"-"</span>, Int#toChar.func<span class='b'>)</span>,  <span class='s'>"returns a-b-c"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='map'>map</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- map ---"</span><span class='b'>)</span>
    x := <span class='b'>[</span>12, 13, 14<span class='b'>]</span>
    show<span class='b'>(</span>x.map |v-&gt;Str| <span class='b'>{</span> v.toHex <span class='b'>}</span>, <span class='s'>"convert ints to hex strings [c, d, e]"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='reduce'>reduce</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- reduce ---"</span><span class='b'>)</span>
    x := <span class='b'>[</span>12, 13, 14<span class='b'>]</span>
    show<span class='b'>(</span>x.reduce<span class='b'>(</span>0<span class='b'>)</span> |r, v| <span class='b'>{</span> v.plus<span class='b'>(</span>r<span class='b'>)</span> <span class='b'>}</span>, <span class='s'>"sum list of ints 39"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='sorting'>sorting</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- sorting ---"</span><span class='b'>)</span>
    s := <span class='b'>[</span><span class='s'>"candy"</span>, <span class='s'>"ate"</span>, <span class='s'>"he"</span><span class='b'>]</span>

    show<span class='b'>(</span>s.sort,                             <span class='s'>"default ordering [ate, candy, he]"</span><span class='b'>)</span>
    show<span class='b'>(</span>s.sort |a,b| <span class='b'>{</span> a.size &lt;=&gt; b.size <span class='b'>}</span>, <span class='s'>"order by size [he, ate, candy]"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='readOnly'>readOnly</span><span class='b'>()</span>
  <span class='b'>{</span>
    q := <span class='b'>[</span><span class='s'>"a"</span>, <span class='s'>"b"</span>, <span class='s'>"c"</span><span class='b'>]</span>
    r := q.rw;  show<span class='b'>(</span>r, <span class='s'>"rw on read/write returns this (r === q)"</span><span class='b'>)</span>
    s := q.ro;  show<span class='b'>(</span>s, <span class='s'>"s is readonly with items in q"</span><span class='b'>)</span>
    t := s.ro;  show<span class='b'>(</span>t, <span class='s'>"ro on readonly returns this (t === s)"</span><span class='b'>)</span>
    u := s.rw;  show<span class='b'>(</span>u, <span class='s'>"read/write with items in s (u !== s)"</span><span class='b'>)</span>
    show<span class='b'>(</span>s.isRO,        <span class='s'>"returns true"</span><span class='b'>)</span>
    show<span class='b'>(</span>s.isRW,        <span class='s'>"return false"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='show'>show</span><span class='b'>(</span>Obj? result, Str what<span class='b'>)</span>
  <span class='b'>{</span>
    resultStr := <span class='s'>""</span> + result
    <span class='k'>if</span> <span class='b'>(</span>resultStr.size &gt; 40<span class='b'>)</span> resultStr = resultStr<span class='b'>[</span>0..40<span class='b'>]</span> + <span class='s'>"..."</span>
    echo<span class='b'>(</span>what.padr<span class='b'>(</span>40<span class='b'>)</span> + <span class='s'>" =&gt; "</span> + resultStr<span class='b'>)</span>
  <span class='b'>}</span>

<span class='b'>}</span>



</pre>
</div>
</div>
<div class='sidebar'>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li style='display: block;'><a href='#access'>access</a></li>
  <li style='display: block;'><a href='#iteration'>iteration</a></li>
  <li style='display: block;'><a href='#join'>join</a></li>
  <li style='display: block;'><a href='#literals'>literals</a></li>
  <li style='display: block;'><a href='#main'>main</a></li>
  <li style='display: block;'><a href='#map'>map</a></li>
  <li style='display: block;'><a href='#modify'>modify</a></li>
  <li style='display: block;'><a href='#readOnly'>readOnly</a></li>
  <li style='display: block;'><a href='#reduce'>reduce</a></li>
  <li style='display: block;'><a href='#search'>search</a></li>
  <li style='display: block;'><a href='#show'>show</a></li>
  <li style='display: block;'><a href='#sorting'>sorting</a></li>
  <li style='display: block;'><a href='#stack'>stack</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
[11-Nov-2010 Thu 10:09:02AM EST]
</p>
</div>
</div>
</body>
</html>
