<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>maps_3::Maps</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>examples</a></li>
  <li>&gt;</li>
  <li><a href='Maps.html'>sys-maps.html</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='src'>
<pre>
<span>#! /usr/bin/env fan
</span><span class='y'>//</span>
<span class='y'>// Copyright (c) 2008, Brian Frank and Andy Frank</span>
<span class='y'>// Licensed under the Academic Free License version 3.0</span>
<span class='y'>//</span>
<span class='y'>// History:</span>
<span class='y'>//   10 Apr 08  Brian Frank  Creation</span>
<span class='y'>//   08 Sep 09  Brian Frank  Rework fandoc -&gt; example</span>
<span class='y'>//</span>

<span class='z'>**</span>
<span class='z'>** Working with Maps</span>
<span class='z'>**</span>
<span class='k'>class</span> Maps
<span class='b'>{</span>
  Void <span id='main'>main</span><span class='b'>()</span>
  <span class='b'>{</span>
    signatures
    literals
    access
    modify
    listConversion
    iteration
    search
    map
    reduce
    caseInsensitive
  <span class='b'>}</span>


  Void <span id='signatures'>signatures</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- signatures ---"</span><span class='b'>)</span>
    show<span class='b'>([</span>sys::Int:sys::Str<span class='b'>]</span>#,  <span class='s'>"formal signature Int keys, Str vals"</span><span class='b'>)</span>
    show<span class='b'>([</span>Int:Str<span class='b'>]</span>#,            <span class='s'>"unqualified type names"</span><span class='b'>)</span>
    show<span class='b'>(</span>Int:Str#,              <span class='s'>"you can omit brackets most of the time"</span><span class='b'>)</span>
    show<span class='b'>(</span>Int:Str?#,             <span class='s'>"Int keys, Str? vals (might store null)"</span><span class='b'>)</span>
    show<span class='b'>([</span>Int:Str<span class='b'>]</span>?#,           <span class='s'>"Int:Str variable which might be null"</span><span class='b'>)</span>
    show<span class='b'>(</span>Str:Int<span class='b'>[]</span>#,            <span class='s'>"Str keys, Int[] vals"</span><span class='b'>)</span>
    show<span class='b'>([</span>Str:Int<span class='b'>][]</span>#,          <span class='s'>"list of Str:Int maps (need brackets)"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='literals'>literals</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- literals ---"</span><span class='b'>)</span>
    show<span class='b'>(</span>Int:Str<span class='b'>[</span>4:<span class='s'>"four"</span>, 5:<span class='s'>"five"</span><span class='b'>]</span>, <span class='s'>"maps Int to Str"</span><span class='b'>)</span>
    show<span class='b'>([</span>4:<span class='s'>"four"</span>, 5:<span class='s'>"five"</span><span class='b'>]</span>,        <span class='s'>"same as above with type inference"</span><span class='b'>)</span>
    show<span class='b'>([</span>4:<span class='s'>"four"</span>, 5f:<span class='s'>"five"</span><span class='b'>]</span>,       <span class='s'>"Num:Str map with type inference"</span><span class='b'>)</span>
    show<span class='b'>(</span>Int:Str<span class='b'>[</span>:<span class='b'>]</span>,                  <span class='s'>"empty Int:Str map"</span><span class='b'>)</span>
    show<span class='b'>([</span>:<span class='b'>]</span>,                         <span class='s'>"empty Obj:Obj map"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='access'>access</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- access ---"</span><span class='b'>)</span>
    map := <span class='b'>[</span>0:<span class='s'>"zero"</span>, 1:<span class='s'>"one"</span>, 2:<span class='s'>"two"</span><span class='b'>]</span>
    show<span class='b'>(</span>map.size,             <span class='s'>"number of key/value pairs, returns 3"</span><span class='b'>)</span>
    show<span class='b'>(</span>map.isEmpty,          <span class='s'>"convenience for size == 0"</span><span class='b'>)</span>
    show<span class='b'>(</span>map.containsKey<span class='b'>(</span>2<span class='b'>)</span>,   <span class='s'>"returns true"</span><span class='b'>)</span>
    show<span class='b'>(</span>map.get<span class='b'>(</span>2<span class='b'>)</span>,           <span class='s'>"value keyed by 2, returns two"</span><span class='b'>)</span>
    show<span class='b'>(</span>map.get<span class='b'>(</span>9<span class='b'>)</span>,           <span class='s'>"returns null"</span><span class='b'>)</span>
    show<span class='b'>(</span>map.get<span class='b'>(</span>9, <span class='s'>"nine"</span><span class='b'>)</span>,   <span class='s'>"returns nine"</span><span class='b'>)</span>
    show<span class='b'>(</span>map<span class='b'>[</span>2<span class='b'>]</span>,               <span class='s'>"convenience for map.get(2), returns two"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='modify'>modify</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- modify ---"</span><span class='b'>)</span>
    map := <span class='b'>[</span>0:<span class='s'>"zero"</span>, 1:<span class='s'>"one"</span>, 2:<span class='s'>"two"</span><span class='b'>]</span>
    map.add<span class='b'>(</span>3, <span class='s'>"three"</span><span class='b'>)</span>;     show<span class='b'>(</span>map, <span class='s'>"add 3:three key/value pair"</span><span class='b'>)</span>
    map.addAll<span class='b'>([</span>4:<span class='s'>"four"</span><span class='b'>])</span>;  show<span class='b'>(</span>map, <span class='s'>"aadds all the key/value pairs to map"</span><span class='b'>)</span>
    map.setAll<span class='b'>([</span>4:<span class='s'>"Four"</span><span class='b'>])</span>;  show<span class='b'>(</span>map, <span class='s'>"sets or adds all key/value pairs in list"</span><span class='b'>)</span>
    map.set<span class='b'>(</span>3, <span class='s'>"Three"</span><span class='b'>)</span>;     show<span class='b'>(</span>map, <span class='s'>"aset value for for key 3"</span><span class='b'>)</span>
    map<span class='b'>[</span>2<span class='b'>]</span> = <span class='s'>"Two"</span>;          show<span class='b'>(</span>map, <span class='s'>"aconvenience for map.set(2, Two)"</span><span class='b'>)</span>
    map<span class='b'>[</span>5<span class='b'>]</span> = <span class='s'>"five"</span>;         show<span class='b'>(</span>map, <span class='s'>"adds 5:five key/value pair (new key)"</span><span class='b'>)</span>
    map.clear;               show<span class='b'>(</span>map, <span class='s'>"remove all the pairs"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='listConversion'>listConversion</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- listConversion ---"</span><span class='b'>)</span>
    x := <span class='b'>[</span>0:<span class='s'>"zero"</span>, 1:<span class='s'>"one"</span>, 2:<span class='s'>"two"</span><span class='b'>]</span>
    show<span class='b'>(</span>x.keys,      <span class='s'>"list the keys [0, 1, 2]"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.vals,      <span class='s'>"list the vals [zero, one, two]"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='iteration'>iteration</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- iteration ---"</span><span class='b'>)</span>
    map := <span class='b'>[</span>0:<span class='s'>"zero"</span>, 1:<span class='s'>"one"</span>, 2:<span class='s'>"two"</span><span class='b'>]</span>

    r := <span class='s'>""</span>; map.each |val| <span class='b'>{</span> r += <span class='s'>"$val "</span> <span class='b'>}</span>
    show<span class='b'>(</span>r, <span class='s'>"each iteration"</span><span class='b'>)</span>

    r = <span class='s'>""</span>; map.each |v, k| <span class='b'>{</span> r += <span class='b'>(</span><span class='s'>"$k:$v "</span><span class='b'>)</span> <span class='b'>}</span>
    show<span class='b'>(</span>r, <span class='s'>"each iteration with key"</span><span class='b'>)</span>
 <span class='b'>}</span>

  Void <span id='search'>search</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- search ---"</span><span class='b'>)</span>
    x := <span class='b'>[</span>0:<span class='s'>"zero"</span>, 1:<span class='s'>"one"</span>, 2:<span class='s'>"two"</span>, 3:<span class='s'>"three"</span><span class='b'>]</span>
    show<span class='b'>(</span>x.find |v| <span class='b'>{</span> v<span class='b'>[</span>0<span class='b'>]</span> == <span class='s'>'t'</span> <span class='b'>}</span>,     <span class='s'>"two"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.find |v| <span class='b'>{</span> v<span class='b'>[</span>0<span class='b'>]</span> == <span class='s'>'x'</span> <span class='b'>}</span>,     <span class='s'>"null"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.findAll |v| <span class='b'>{</span> v<span class='b'>[</span>0<span class='b'>]</span> == <span class='s'>'t'</span> <span class='b'>}</span>,  <span class='s'>"[2:two, 3:three]"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.findAll |v, k| <span class='b'>{</span> k.isEven <span class='b'>}</span>,  <span class='s'>"[0:zero, 2:two]"</span><span class='b'>)</span>
    show<span class='b'>(</span>x.exclude |v, k| <span class='b'>{</span> k.isEven <span class='b'>}</span>,  <span class='s'>"[1:one, 3:three]"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='map'>map</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- map ---"</span><span class='b'>)</span>
    x := <span class='b'>[</span>4:<span class='s'>"four"</span>, 5:<span class='s'>"five"</span>, 6:<span class='s'>"six"</span><span class='b'>]</span>
    show<span class='b'>(</span>x.map |v, k-&gt;Str| <span class='b'>{</span> <span class='k'>return</span> <span class='s'>"$k=$v"</span> <span class='b'>}</span>, <span class='s'>"[4:4=four, 5:5=five, 6:6=six]"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='reduce'>reduce</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- reduce ---"</span><span class='b'>)</span>
    x := <span class='b'>[</span>4:<span class='s'>"four"</span>, 5:<span class='s'>"five"</span>, 6:<span class='s'>"six"</span><span class='b'>]</span>
    show<span class='b'>(</span>x.reduce<span class='b'>(</span>StrBuf<span class='b'>())</span> |StrBuf buf, v| <span class='b'>{</span> buf-&gt;add<span class='b'>(</span>v<span class='b'>)</span>  <span class='b'>}</span>, <span class='s'>"fourfivesix"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='caseInsensitive'>caseInsensitive</span><span class='b'>()</span>
  <span class='b'>{</span>
    echo<span class='b'>(</span><span class='s'>"\n--- caseInsensitive ---"</span><span class='b'>)</span>
    x := Str:Str<span class='b'>[</span>:<span class='b'>]</span> <span class='b'>{</span> it.caseInsensitive = <span class='k'>true</span> <span class='b'>}</span>
    x<span class='b'>[</span><span class='s'>"a"</span><span class='b'>]</span> = <span class='s'>"alpha"</span>;  show<span class='b'>(</span>x, <span class='s'>"[a:alpha]"</span><span class='b'>)</span>
    r := x<span class='b'>[</span><span class='s'>"A"</span><span class='b'>]</span>;       show<span class='b'>(</span>r, <span class='s'>"alpha"</span><span class='b'>)</span>
    x<span class='b'>[</span><span class='s'>"B"</span><span class='b'>]</span> = <span class='s'>"beta"</span>;   show<span class='b'>(</span>x, <span class='s'>"[B:beta, a:alpha]"</span><span class='b'>)</span>
    x.remove<span class='b'>(</span><span class='s'>"b"</span><span class='b'>)</span>;     show<span class='b'>(</span>x, <span class='s'>"[a:alpha]"</span><span class='b'>)</span>
  <span class='b'>}</span>

  Void <span id='show'>show</span><span class='b'>(</span>Obj? result, Str what<span class='b'>)</span>
  <span class='b'>{</span>
    resultStr := <span class='s'>""</span> + result
    <span class='k'>if</span> <span class='b'>(</span>resultStr.size &gt; 40<span class='b'>)</span> resultStr = resultStr<span class='b'>[</span>0..40<span class='b'>]</span> + <span class='s'>"..."</span>
    echo<span class='b'>(</span>what.padr<span class='b'>(</span>40<span class='b'>)</span> + <span class='s'>" =&gt; "</span> + resultStr<span class='b'>)</span>
  <span class='b'>}</span>

<span class='b'>}</span>



</pre>
</div>
</div>
<div class='sidebar'>
<div class='slots'>
<div class='overview'>
<h2>Slots</h2>
<ul class='clean'>
  <li style='display: block;'><a href='#access'>access</a></li>
  <li style='display: block;'><a href='#caseInsensitive'>caseInsensitive</a></li>
  <li style='display: block;'><a href='#iteration'>iteration</a></li>
  <li style='display: block;'><a href='#listConversion'>listConversion</a></li>
  <li style='display: block;'><a href='#literals'>literals</a></li>
  <li style='display: block;'><a href='#main'>main</a></li>
  <li style='display: block;'><a href='#map'>map</a></li>
  <li style='display: block;'><a href='#modify'>modify</a></li>
  <li style='display: block;'><a href='#reduce'>reduce</a></li>
  <li style='display: block;'><a href='#search'>search</a></li>
  <li style='display: block;'><a href='#show'>show</a></li>
  <li style='display: block;'><a href='#signatures'>signatures</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
[11-Nov-2010 Thu 10:09:02AM EST]
</p>
</div>
</div>
</body>
</html>
