<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>Deployment</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>docLang</a></li>
  <li>&gt;</li>
  <li><a href='Deployment.html'>Deployment</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='prevNext'>
<div class='prev'><a href='JavaScript.html'><img src='../go-previous.png' alt='prev' /></a> <a href='JavaScript.html'>JavaScript</a></div>
<div class='next'><a href='Env.html'>Env</a> <a href='Env.html'><img src='../go-next.png' alt='next' /></a></div>
</div>
<h1 class='title'>Deployment</h1>

<h1 id='overview'>Overview </h1>

<p>The Fantom compiler generates pod files which contain a bytecode representation of the code which we call <em>fcode</em>.  Pod files are just normal zip files you can open in your favorite zip tool.  Pod files also contain files for the constant pools and any resource files you might have bundled with your pod (available via the <code><a href='../sys/Pod.html#files'>Pod.files</a></code> method).</p>

<p>Pod files are portable between Java and .NET.  The runtimes are responsible for reading in pod files to execute them.  The runtimes also provide a full implementation of the <code>sys</code> pod:</p>

<ul>
<li>The Java runtime reads pods files and emits the fcode as Java bytecode. This translation occurs at runtime.  The sys APIs are implemented in normal Java code.</li>

<li>Likewise the .NET runtime reads pods files and emits the fcode as IL at runtime.  The sys APIs are implemented in normal C# code.</li>
</ul>

<p>The following illustration depicts this architecture:</p>

<p><img src='deployment.png' alt='deployment'/></p>

<h1 id='natives'>Natives </h1>

<p>If a pod is written 100% in Fantom code, then it is completely portable between the runtimes.  However some pods like <code>inet</code> or <code>fwt</code> need to bind the underlying platform with native methods.</p>

<p>When you build a pod with native methods, it generates a normal pod file which is necessary for all the reflective metadata.  But it also generates a native file.  For Java natives this is a jar file under the "lib/java" directory.  For .NET natives a dll file is generated under "lib/dotnet".  Also see <a href='../docTools/Build.html#buildPod'>docTools</a> for how to build pods with native code.</p>

<p>Note: natives have been obseleted by the <a href='JavaFFI.html'>Java FFI</a>.</p>

<h1 id='depends'>Dependencies </h1>

<p>All pods have an explicit set of dependencies on other pods.  All pods must have a dependency on the <code>sys</code> pod.  Dependencies are declared in your <a href='../docTools/Build.html#buildPod'>build script</a> and are available at runtime via <code><a href='../sys/Pod.html#depends'>Pod.depends</a></code>.</p>

<p>Dependencies are modeled via the <code><a href='../sys/Depend.html'>sys::Depend</a></code> class.  They are declared in a string format which includes the pod name and a set of <em>version constraints</em>.  Version constraints can be a simple version number, a version number and anything greater, or a version range.  See Depend's <code><a href='../sys/Depend.html'>fandoc</a></code> for the format details.</p>

<p>Dependencies are used in two ways.  At compile time dependencies determine which pods can be imported via the <a href='CompilationUnits.html#using'>using</a> statement.  It is a compile time error to import a pod which isn't declared in the dependency list.</p>

<p>Dependencies are also checked at runtime.  If a pod's dependencies are not met, then the pod cannot be loaded.</p>

<h1 id='appDeployment'>Application Deployment </h1>

<p>Deploying a Fantom application involves three components:</p>

<ol style='list-style-type:decimal'>
<li>Platform runtime: either the Java VM or the .NET VM (usually pre-installed)</li>

<li>Fantom runtime: a distribution of the core files</li>

<li>Pods: the library of pods necessary for your application</li>
</ol>

<p>The Fantom distribution downloaded from the web is really a developer distro.  Most of those files are not needed for runtime.  In general the only directories needed for runtime are <code>bin</code>, <code>lib</code>, and <code>etc</code>.  Within the <code>lib</code> directory you can remove all the pod, jar, and dll files not needed by your application.</p>
<div class='prevNext'>
<div class='prev'><a href='JavaScript.html'><img src='../go-previous.png' alt='prev' /></a> <a href='JavaScript.html'>JavaScript</a></div>
<div class='next'><a href='Env.html'>Env</a> <a href='Env.html'><img src='../go-next.png' alt='next' /></a></div>
</div>
</div>
<div class='sidebar'>
<h2>Contents</h2>
<ul>
<li><a href='#overview'>Overview </a></li><li><a href='#natives'>Natives </a></li><li><a href='#depends'>Dependencies </a></li><li><a href='#appDeployment'>Application Deployment </a></li></ul>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
docLang 1.0.56
[11-Nov-2010 Thu 10:08:28AM EST]
</p>
</div>
</div>
</body>
</html>
