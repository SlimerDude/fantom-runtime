<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <title>Statements</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../doc.css'/>
  <script type='text/javascript' src='../doc.js'></script>
<!--[if lt IE 7]>
<script src='http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js' type='text/javascript'></script>
<![endif]-->
</head>
<body onload='Login.check();'>
<div class='header'>
<div>
<h1><a href='/'>Fantom</a></h1>
<p id='sidewalkLogin_'>&nbsp;</p>
<form method='get' action='/sidewalk/search/'>
<p>
<input type='text' name='q' size='30' value='Search...' onfocus='if (value=="Search...") value=""' onblur='if (value=="") value="Search..."' />
</p>
</form>
<ul>
<li><a href='/'>Home</a></li>
<li class='active'><a href='../index.html'>Docs</a></li>
<li><a href='/sidewalk/blog/'>Blog</a></li>
<li><a href='/sidewalk/ticket/'>Tickets</a></li>
<li><a href='/sidewalk/topic/'>Discuss</a></li>
</ul></div>
</div>
<div class='subHeader'>
<div>
<ul>
  <li><a href='../index.html'>Doc Home</a></li>
  <li>&gt;</li>
  <li><a href='index.html'>docLang</a></li>
  <li>&gt;</li>
  <li><a href='Statements.html'>Statements</a></li>
</ul>
</div>
</div>
<div class='content'>
<div>
<div class='fandoc'>
<div class='prevNext'>
<div class='prev'><a href='Expressions.html'><img src='../go-previous.png' alt='prev' /></a> <a href='Expressions.html'>Expressions</a></div>
<div class='next'><a href='Exceptions.html'>Exceptions</a> <a href='Exceptions.html'><img src='../go-next.png' alt='next' /></a></div>
</div>
<h1 class='title'>Statements</h1>

<h1 id='overview'>Overview </h1>

<p>Fantom code is written as a series of statements just like Java or C#. However unlike Java/C#, Fantom statements are not required to be terminated with a semicolon.  A Fantom statement may be terminated one of three ways:</p>

<ol style='list-style-type:decimal'>
<li>newline</li>

<li>semicolon</li>

<li>end of block <code>}</code> curly brace</li>
</ol>

<p>By convention a simple newline is the preferred mechanism for separating statements.  A semicolon is only used when placing multiple statements on the same line.  For example these are all valid Fantom statements:</p>

<pre>if (authenticated)
{
  sendToHomePage
  return true
}

if (authenticated)
{
  sendToHomePage();
  return true;
}

if (authenticated) { sendToHomePage; return true }</pre>

<p>The first version is the preferred syntax.  The third version also exhibits good mojo if it is compact enough to keep the code readable.</p>

<p>The Fantom grammar is not perfectly unambiguous when you omit semicolons. So on occasion you will run into a situation when the compiler complains and you might need to stick in a semicolon - but in practice this rarely happens.  Another side effect of this is that Fantom requires the opening parenthesis of a method call to be on the same line as the method identifier:</p>

<pre>// ok
call(...)

// not ok
call
  (...)</pre>

<p>This rule also applies to the opening square bracket of an index operation:</p>

<pre>// ok
list[...]

// not ok
list
  [...]</pre>

<h1 id='expr'>Expression Statements </h1>

<p>The most common type of statement is a stand alone expression. The following expressions are considered valid statements:</p>

<ul>
<li>Any assignment expression including the increment/decrement operators</li>

<li>Method calls (or chains of method calls)</li>
</ul>

<h1 id='return'>Return Statement </h1>

<p>The <code>return</code> statement is used to exit a method:</p>

<pre>// if Void method:
return

// if non-Void method:
return &lt;expr></pre>

<p>If the enclosing method is <code>Void</code>, then <code>return</code> simply returns control back to the code which called the method.  If the enclosing method is non-void, then the <code>return</code> statement includes the expression used to return a result object to the caller.</p>

<p>If returning an expression, then the expression must start on the same line as the <code>return</code> keyword:</p>

<pre>// this is ok
return call(x,
  y, z)

// this is illegal
return
  call(x, y, z)</pre>

<p>Fantom allows you omit the <code>return</code> keyword if your method or closure contains exactly one statement:</p>

<pre>Str name() { return "Bob" } // long version
Str name() { "Bob" }        // short version</pre>

<p>Convention is to omit the <code>return</code> keyword for single statement returns.</p>

<h1 id='localDef'>Local Variables </h1>

<p>Local variables may be declared using the following syntax:</p>

<pre>// syntax
&lt;type> &lt;identifier> := &lt;init>

// example
Str name := "Jack Shephard"</pre>

<p>Fantom supports <a href='http://en.wikipedia.org/wiki/Type_inference'>type inference</a> for local variables, which allows you to omit the type signature. If the type signature is omitted, then the variable is typed according to the initializer expression.  In the example above the right hand side resolves to a <code>Str</code>, so we could rewrite the statement above as:</p>

<pre>name := "Jack Shephard"</pre>

<p>Fantom convention encourages use of type inference when possible.  However if the right hand side expression resolves to an ambiguous type, then you will need to specify the variable's type signature.  The most common case when type inference doesn't work is when you need to initialize a local variable to <code>null</code>.</p>

<p>Fantom uses the <code>:=</code> operator for local variable initialization rather than the standard <code>=</code> assignment operator.  The primary purpose of the <code>:=</code> syntax is to distinguish normal assignments from local declarations. This syntax captures programmer intent better and enables the compiler to catch typos like a misspelled local.</p>

<p>Fantom does not support the comma operator to declare multiple local variables like Java or C#.  In practice though most locals will be declared using type inference.</p>

<p>If a local variable is not explicitly assigned an initial value, then it implicitly defaults to <code>null</code>, <code>false</code>, <code>0</code>, or <code>0.0f</code> following same rules for field defaults.  This is a little different than Java or C# which require definite assignment.</p>

<h1 id='if'>If Statements </h1>

<p>Fantom supports <code>if</code> and <code>else</code> using the Java/C# syntax:</p>

<pre>if (&lt;cond>)
  &lt;block>

if (&lt;cond>)
  &lt;block>
else
  &lt;block>

if (&lt;cond>)
  &lt;block>
else if (&lt;cond>)
  &lt;block>
else
  &lt;block></pre>

<p>The <code>if</code> condition must evaluate to a <code>sys::Bool</code> expression. The block can be a single statement or a block of multiple statements delineated by <code>{</code> <code>}</code> curly braces.</p>

<h1 id='loop'>Loop Statement </h1>

<p>Fantom supports  <code>while</code> and <code>for</code> loops using familiar Java and C# syntax.  Although you'll find when writing Fantom that most looping is actually done using <a href='Closures.html'>closures</a>.</p>

<h2 id='while'>While Statement </h2>

<p>Fantom supports <code>while</code> loops using Java/C# syntax:</p>

<pre>// syntax
while (&lt;cond>)
  &lt;block>

// example
while (p != null)
  p = p.next</pre>

<p>The <code>while</code> loop executes its block until its condition evaluations to <code>false</code>.  The <code>while</code> condition must evaluate to a <code>sys::Bool</code> expression.  The block can be a single statement or a block of multiple statements delineated by <code>{</code> <code>}</code> curly braces.</p>

<p>Fantom doesn't currently support <code>do</code> <code>while</code> loops.</p>

<h2 id='for'>For Statement </h2>

<p>Fantom supports <code>for</code> loops using Java/C# syntax:</p>

<pre>// syntax
for (&lt;init>; &lt;cond>; &lt;update>)
  &lt;block>

// example
for (i:=0; i&lt;10; ++i)
  echo(i)</pre>

<p>The <code>for</code> condition must evaluate to a <code>sys::Bool</code> expression.  The block can be a single statement or a block of multiple statements delineated by <code>{</code> <code>}</code> curly braces.  All three expressions of the <code>for</code> loop are optional.  If the cond expression is omitted, it defaults to <code>true</code>.  The init expression is executed once on loop entry and the update expression after each run of the loop.  The <code>for</code> loop runs until the condition evaluates to <code>false</code>.</p>

<p>Like Java/C# the init expression of the <code>for</code> loop can be a local variable declaration which defines a local scoped only within the <code>for</code> loop.  Unlike Java/C# the comma operator is not supported in the init and update expressions.</p>

<h2 id='break'>Break Statement </h2>

<p>The <code>break</code> statement is used with both the <code>for</code> and <code>while</code> loops to break out of the loop.  For example:</p>

<pre>for (i:=0; i&lt;10; ++i)
{
  if (i == 3) break
  echo(i)
}
echo("done")

// prints
0
1
2
done</pre>

<p>The <code>break</code> statement always applies to the inner-most loop. Fantom does not support labeled <code>breaks</code>.</p>

<h2 id='continue'>Continue Statement </h2>

<p>The <code>continue</code> statement is used with both the <code>for</code> and <code>while</code> loops to jump back to the top of the loop.  For example:</p>

<pre>for (i:=0; i&lt;4; ++i)
{
  if (i == 2) continue
  echo(i)
}
echo("done")

// prints
0
1
3
done</pre>

<p>The <code>continue</code> statement always applies to the inner-most loop. Fantom does not support labeled <code>continues</code>.</p>

<h1 id='switch'>Switch Statement </h1>

<p>Fantom supports a <code>switch</code> statement used to execute a block of code by matching the value of a expression against a list of <em>case labels</em>. The syntax is very similar to Java/C#:</p>

<pre>switch (&lt;cond>)
{
  case &lt;label1>:
    &lt;block1>
  case &lt;label2>:
    &lt;block2>
  ...
  default:
    &lt;defaultBlock>
}</pre>

<p>The condition expression is matched against all the case labels. If a match is found, then it executes the statements in that case's block.  If no matches are found then the optional <code>default</code> block is executed.  Unlike the <code>if</code>, <code>for</code>, and <code>while</code> statements, the case blocks are not wrapped with <code>{</code> <code>}</code> curly braces.</p>

<p>Fantom's <code>switch</code> statement allows the condition and case expressions to be any valid expressions.  So you can switch on strings or types too.  When the condition evaluates to an <code><a href='../sys/Int.html'>sys::Int</a></code> or <code><a href='../sys/Enum.html'>sys::Enum</a></code> and the <code>case</code> labels evaluate to constants, then the <code>switch</code> is compiled into the <code>tableswitch</code> opcode.  Otherwise the <code>switch</code> statement matches the <code>case</code> labels using an equality check via the <code><a href='../sys/Obj.html#equals'>sys::Obj.equals</a></code> method.  For example:</p>

<pre>// tableswitch
switch (weekday)
{
  case Weekday.sat:
  case Weekday.sun:
    return "it's the weekend baby!"
  default:
    return "back to work!"
}

// equality switch
switch (method.upper)
{
  case "GET":  serviceGet
  case "POST": servicePost
  default:     methodNotSupported
}</pre>

<p>In Fantom the <code>switch</code> statement doesn't require a <code>break</code> to end a block of code for a given case like Java or C#.  You cannot fall-through from one case block to the next case block.  However you can group multiple case labels together like we did with <code>Weekday.sat</code> and <code>Weekday.sun</code> in the example above.</p>

<h1 id='exceptions'>Exception Handling </h1>

<p>Fantom supports <code>throw</code> and <code>try</code> statements with a syntax very similar to Java and C#.  These statements are discussed separately in the <a href='Exceptions.html'>exception handling</a> chapter.</p>
<div class='prevNext'>
<div class='prev'><a href='Expressions.html'><img src='../go-previous.png' alt='prev' /></a> <a href='Expressions.html'>Expressions</a></div>
<div class='next'><a href='Exceptions.html'>Exceptions</a> <a href='Exceptions.html'><img src='../go-next.png' alt='next' /></a></div>
</div>
</div>
<div class='sidebar'>
<h2>Contents</h2>
<ul>
<li><a href='#overview'>Overview </a></li><li><a href='#expr'>Expression Statements </a></li><li><a href='#return'>Return Statement </a></li><li><a href='#localDef'>Local Variables </a></li><li><a href='#if'>If Statements </a></li><li><a href='#loop'>Loop Statement </a><ul>
<li><a href='#while'>While Statement </a></li><li><a href='#for'>For Statement </a></li><li><a href='#break'>Break Statement </a></li><li><a href='#continue'>Continue Statement </a></li></ul>
</li><li><a href='#switch'>Switch Statement </a></li><li><a href='#exceptions'>Exception Handling </a></li></ul>
</div>
</div>
</div>
<div class='footer'>
<div>
<p>
docLang 1.0.56
[11-Nov-2010 Thu 10:08:28AM EST]
</p>
</div>
</div>
</body>
</html>
